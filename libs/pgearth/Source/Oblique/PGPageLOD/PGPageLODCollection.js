define(["../../Core/createGuid","../../Core/defaultValue","../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","./PGELoadStatus"],function(e,t,s,o,i,r,n){"use strict";function a(s){s=t(s,t.EMPTY_OBJECT),this._pageLODs=[],this._guid=e(),this.show=t(s.show,!0),this.destroyPrimitives=t(s.destroyPrimitives,!0)}function p(e,t){return e._pageLODs.indexOf(t)}function h(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?0:e._distanceToCamera-t._distanceToCamera}return o(a.prototype,{length:{get:function(){return this._pageLODs.length}}}),a.prototype.add=function(e){var t=e._external=e._external||{};return(t._composites=t._composites||{})[this._guid]={collection:this},this._pageLODs.push(e),e},a.prototype.remove=function(e){if(this.contains(e)){var t=this._pageLODs.indexOf(e);if(-1!==t)return this._pageLODs.splice(t,1),delete e._external._composites[this._guid],this.destroyPrimitives&&e.destroy(),!0}return!1},a.prototype.removeAndDestroy=function(e){var t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t},a.prototype.removeAll=function(){if(this.destroyPrimitives)for(var e=this._pageLODs,t=e.length,s=0;s<t;++s)e[s].destroy();this._pageLODs=[]},a.prototype.contains=function(e){return!!(s(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])},a.prototype.raise=function(e){if(s(e)){var t=p(this,e),o=this._pageLODs;if(t!==o.length-1){var i=o[t];o[t]=o[t+1],o[t+1]=i}}},a.prototype.raiseToTop=function(e){if(s(e)){var t=p(this,e),o=this._pageLODs;t!==o.length-1&&(o.splice(t,1),o.push(e))}},a.prototype.lower=function(e){if(s(e)){var t=p(this,e),o=this._pageLODs;if(0!==t){var i=o[t];o[t]=o[t-1],o[t-1]=i}}},a.prototype.lowerToBottom=function(e){if(s(e)){var t=p(this,e),o=this._pageLODs;0!==t&&(o.splice(t,1),o.unshift(e))}},a.prototype.get=function(e){return this._pageLODs[e]},a.prototype.update=function(e){if(this.show){e.totalMemoryUsageInBytes=0;for(var t=[],s=this._pageLODs,o=0;o<s.length;++o)t.push(s[o]);t.sort(h),e._selectedTiles=[];o=0;for(var i=t.length;o<i;o++)t[o].update(e);e._selectedTiles.sort(h);for(o=0,i=e._selectedTiles.length;o<i;o++)e._selectedTiles[o].getLoadStatus()==n.PG_UNLOAD&&e._selectedTiles[o].netLoad(e);for(o=0,i=e._selectedTiles.length;o<i;o++)e._selectedTiles[o].update(e);for(o=0,i=t.length;o<i;o++)e.totalMemoryUsageInBytes>e.maximumMemoryUsage&&t[i-o-1].release(e)}},a.prototype.isDestroyed=function(){return!1},a.prototype.destroy=function(){return this.removeAll(),i(this)},a});