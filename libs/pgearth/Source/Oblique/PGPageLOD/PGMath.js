define(["../../Core/BoundingSphere","../../Core/Cartesian2","../../Core/Cartesian3","../../Core/Cartesian4"],function(e,r,t,n){"use strict";function i(){}return i.expandSphere=function(r,n){if(!n.empty()){if(r.empty())return void e.clone(n,r);var i=new t;t.subtract(r.center,n.center,i);var u=t.magnitude(i);if(!(u+n.radius<=r.radius)){if(u+r.radius<=n.radius)return void e.clone(n,r);var c=.5*(r.radius+u+n.radius),a=(c-r.radius)/u,o=new t(r.center.x,r.center.y,r.center.z);o.x+=(n.center.x-r.center.x)*a,o.y+=(n.center.y-r.center.y)*a,o.x+=(n.center.z-r.center.z)*a,r.center=o,r.radius=c}}},i.computeTowVecDist=function(e,r){var t=e.x-r.x,n=e.y-r.y,i=e.z-r.z;return Math.sqrt(t*t+n*n+i*i)},i.computeTowVecDistSquare=function(e,r){var t=e.x-r.x,n=e.y-r.y,i=e.z-r.z;return t*t+n*n+i*i},i.computeDistFromEye=function(e,r){return e.applyMatrix4(r).length()},i.mulVec3Vec4=function(e,r){return e.x*r.x+e.y*r.y+e.z*r.z+r.w},i.computeSpherePixelSize=function(e,r){return Math.abs(e.radius/i.mulVec3Vec4(e.center,r))},i.computePixelSizeVector=function(e,r,i){var u=e.z,c=e.w,a=r,o=i,s=a[0]*u*.5,y=a[8]*u*.5+a[11]*u*.5,x=new t(o[0]*s+o[2]*y,o[4]*s+o[6]*y,o[8]*s+o[10]*y),z=a[5]*c*.5,d=a[9]*c*.5+a[11]*c*.5,f=new t(o[1]*z+o[2]*d,o[5]*z+o[6]*d,o[9]*z+o[10]*d),p=a[11],m=a[15],l=new n(o[2]*p,o[6]*p,o[10]*p,o[14]*p+o[15]*m),w=x.x*x.x+x.y*x.y+x.z*x.z,v=f.x*f.x+f.y*f.y+f.z*f.z,h=.7071067811/Math.sqrt(w+v);return n.multiplyByScalar(l,h,l),l},i});