define(["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../Core/FeatureDetection","../../ThirdParty/knockout","../getElement","./BaseLayerPickerViewModel"],function(e,t,a,r,i,n,s,d){"use strict";function o(t,a){if(!e(t))throw new r("container is required.");t=s(t);var o=new d(a),c=document.createElement("button");c.type="button",c.className="pgEarth-button pgEarth-toolbar-button",c.setAttribute("data-bind","attr: { title: buttonTooltip },click: toggleDropDown"),t.appendChild(c);var l=document.createElement("img");l.setAttribute("draggable","false"),l.className="pgEarth-baseLayerPicker-selected",l.setAttribute("data-bind","attr: { src: buttonImageUrl }, visible: !!buttonImageUrl"),c.appendChild(l);var p=document.createElement("div");p.className="pgEarth-baseLayerPicker-dropDown",p.setAttribute("data-bind",'css: { "pgEarth-baseLayerPicker-dropDown-visible" : dropDownVisible }'),t.appendChild(p);var m=document.createElement("div");m.className="pgEarth-baseLayerPicker-sectionTitle",m.setAttribute("data-bind","visible: imageryProviderViewModels.length > 0"),m.innerHTML="Imagery",p.appendChild(m);var b=document.createElement("div");b.className="pgEarth-baseLayerPicker-section",b.setAttribute("data-bind","foreach: _imageryProviders"),p.appendChild(b);var u=document.createElement("div");u.className="pgEarth-baseLayerPicker-category",b.appendChild(u);var h=document.createElement("div");h.className="pgEarth-baseLayerPicker-categoryTitle",h.setAttribute("data-bind","text: name"),u.appendChild(h);var v=document.createElement("div");v.className="pgEarth-baseLayerPicker-choices",v.setAttribute("data-bind","foreach: providers"),u.appendChild(v);var g=document.createElement("div");g.className="pgEarth-baseLayerPicker-item",g.setAttribute("data-bind",'css: { "pgEarth-baseLayerPicker-selectedItem" : $data === $parents[1].selectedImagery },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedImagery = $data; }'),v.appendChild(g);var E=document.createElement("img");E.className="pgEarth-baseLayerPicker-itemIcon",E.setAttribute("data-bind","attr: { src: iconUrl }"),E.setAttribute("draggable","false"),g.appendChild(E);var y=document.createElement("div");y.className="pgEarth-baseLayerPicker-itemLabel",y.setAttribute("data-bind","text: name"),g.appendChild(y);var P=document.createElement("div");P.className="pgEarth-baseLayerPicker-sectionTitle",P.setAttribute("data-bind","visible: terrainProviderViewModels.length > 0"),P.innerHTML="Terrain",p.appendChild(P);var L=document.createElement("div");L.className="pgEarth-baseLayerPicker-section",L.setAttribute("data-bind","foreach: _terrainProviders"),p.appendChild(L);var C=document.createElement("div");C.className="pgEarth-baseLayerPicker-category",L.appendChild(C);var k=document.createElement("div");k.className="pgEarth-baseLayerPicker-categoryTitle",k.setAttribute("data-bind","text: name"),C.appendChild(k);var w=document.createElement("div");w.className="pgEarth-baseLayerPicker-choices",w.setAttribute("data-bind","foreach: providers"),C.appendChild(w);var D=document.createElement("div");D.className="pgEarth-baseLayerPicker-item",D.setAttribute("data-bind",'css: { "pgEarth-baseLayerPicker-selectedItem" : $data === $parents[1].selectedTerrain },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedTerrain = $data; }'),w.appendChild(D);var N=document.createElement("img");N.className="pgEarth-baseLayerPicker-itemIcon",N.setAttribute("data-bind","attr: { src: iconUrl }"),N.setAttribute("draggable","false"),D.appendChild(N);var _=document.createElement("div");_.className="pgEarth-baseLayerPicker-itemLabel",_.setAttribute("data-bind","text: name"),D.appendChild(_),n.applyBindings(o,c),n.applyBindings(o,p),this._viewModel=o,this._container=t,this._element=c,this._dropPanel=p,this._closeDropDown=function(e){c.contains(e.target)||p.contains(e.target)||(o.dropDownVisible=!1)},i.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}return t(o.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),o.prototype.isDestroyed=function(){return!1},o.prototype.destroy=function(){return i.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),n.cleanNode(this._element),n.cleanNode(this._dropPanel),this._container.removeChild(this._element),this._container.removeChild(this._dropPanel),a(this)},o});