define(["./Cartesian3","./defined","./DeveloperError","./JulianDate","./Math","./Matrix3","./TimeConstants","./TimeStandard"],function(t,a,n,e,s,h,o,i){"use strict";var M={};var r=32.184,c=2451545;function u(t,a){a=e.addSeconds(t,r,a);var n,s=e.totalDays(a)-c;return a=e.addSeconds(a,(n=6.239996+.0172019696544*s,.001657*Math.sin(n+.01671*Math.sin(n))),a)}var f=new e(2451545,0,i.TAI),l=1e3,w=s.RADIANS_PER_DEGREE,y=s.RADIANS_PER_ARCSECOND,d=new h;function v(e,o,i,M,r,c,u){if(i<0&&(i=-i,r+=s.PI),i<0||i>s.PI)throw new n("The inclination is out of range. Inclination must be greater than or equal to zero and less than or equal to Pi radians.");var f=e*(1-o),l=M-r,w=r,y=function(t,a){if(a<0||a>=1)throw new n("eccentricity out of range.");return function(t,a){if(a<0||a>=1)throw new n("eccentricity out of range.");var e=Math.floor(t/s.TWO_PI);t-=e*s.TWO_PI;var h=Math.cos(t)-a,o=Math.sin(t)*Math.sqrt(1-a*a),i=Math.atan2(o,h);i=s.zeroToTwoPi(i),t<0&&(i-=s.TWO_PI);return i+=e*s.TWO_PI}(function(t,a){if(a<0||a>=1)throw new n("eccentricity out of range.");var e,h=Math.floor(t/s.TWO_PI),o=(t-=h*s.TWO_PI)+a*Math.sin(t)/(1-Math.sin(t+a)+Math.sin(t)),i=Number.MAX_VALUE;for(e=0;e<P&&Math.abs(i-o)>I;++e){var M=(i=o)-a*Math.sin(i)-t,r=1-a*Math.cos(i);o=i-M/r}if(e>=P)throw new n("Kepler equation did not converge");return i=o+h*s.TWO_PI}(t,a),a)}(c-M,o);if("Hyperbolic"===function(t,a){if(t<0)throw new n("eccentricity cannot be negative.");if(t<=a)return"Circular";if(t<1-a)return"Elliptical";if(t<=1+a)return"Parabolic";return"Hyperbolic"}(o,0)&&Math.abs(s.negativePiToPi(y))>=Math.acos(-1/o))throw new n("The true anomaly of the hyperbolic orbit lies outside of the bounds of the hyperbola.");!function(t,e,o,i){if(e<0||e>s.PI)throw new n("inclination out of range");var M=Math.cos(t),r=Math.sin(t),c=Math.cos(e),u=Math.sin(e),f=Math.cos(o),l=Math.sin(o);a(i)?(i[0]=f*M-l*r*c,i[1]=l*M+f*r*c,i[2]=r*u,i[3]=-f*r-l*M*c,i[4]=-l*r+f*M*c,i[5]=M*u,i[6]=l*u,i[7]=-f*u,i[8]=c):i=new h(f*M-l*r*c,-f*r-l*M*c,l*u,l*M+f*r*c,-l*r+f*M*c,-f*u,r*u,M*u,c)}(l,i,w,d);var v=f*(1+o),_=Math.cos(y),E=Math.sin(y),b=1+o*_;if(b<=s.Epsilon10)throw new n("elements cannot be converted to cartesian");var m=v/b;return a(u)?(u.x=m*_,u.y=m*E,u.z=0):u=new t(m*_,m*E,0),h.multiplyByVector(d,u,u)}var P=50,I=s.EPSILON8;var _=149598022260.7121,E=100.46645683*w,b=1295977422.83429*y,m=16002,T=21863,D=32004,A=10931,N=14529,O=16368,S=15318,p=32794,R=64e-7*14959787e4,g=-2273887.624,C=927506.794,W=14959787e4*-8e-7,Y=32e-7*14959787e4,U=-613351.267,q=284235.953,B=-164557.657,L=-2243968.05,V=-688150.202,z=1017265.516,J=807828.498,x=14e-7*14959787e4,F=359034.888,H=14959787e4*-28e-7,G=329115.314,K=10,X=16002,j=21863,k=10931,Q=1473,Z=32004,$=4387,tt=73,at=-325e-7,nt=-322e-7,et=1e-7*-79,st=232*1e-7,ht=1e-7*-52,ot=97e-7,it=55e-7,Mt=-41e-7,rt=-105e-7,ct=-137e-7,ut=258e-7,ft=35e-7,lt=1e-7*-116,wt=-88e-7,yt=-112e-7,dt=-8e-6,vt=new e(0,0,i.TAI);function Pt(t,a){u(t,vt);var n=(vt.dayNumber-f.dayNumber+(vt.secondsOfDay-f.secondsOfDay)/o.SECONDS_PER_DAY)/o.DAYS_PER_JULIAN_CENTURY,e=n*n,s=e*n,h=s*n,i=383397.7725+.004*n,M=.055545526-1.6e-8*n,r=5.15668983*w,c=-8e-5*n+.02966*e-42e-6*s-1.3e-7*h,d=83.35324312*w,P=14643420.2669*n-38.2702*e-.045047*s+21301e-8*h,I=125.04455501*w,_=-6967919.3631*n+6.3602*e+.007625*s-3586e-8*h,E=218.31664563*w,b=1732559343.4847*n-6.391*e+.006588*s-3169e-8*h,m=297.85019547*w+y*(1602961601.209*n-6.3706*e+.006593*s-3169e-8*h),T=134.96340251*w+y*(1717915923.2178*n+31.8792*e+.051635*s-2447e-7*h),D=357.52910918*w+y*(129596581.0481*n-.5532*e+136e-6*s-1149e-8*h),A=310.17137918*w-y*(6967051.436*n+6.2068*e+.007618*s-3219e-8*h),N=2*m,O=4*m,S=6*m,p=2*T,R=3*T,g=4*T,C=2*(93.27209062*w+y*(1739527262.8478*n-12.7512*e-.001037*s+417e-8*h));i+=3400.4*Math.cos(N)-635.6*Math.cos(N-T)-235.6*Math.cos(T)+218.1*Math.cos(N-D)+181*Math.cos(N+T),M+=.014216*Math.cos(N-T)+.008551*Math.cos(N-p)-.001383*Math.cos(T)+.001356*Math.cos(N+T)-.001147*Math.cos(O-R)-914e-6*Math.cos(O-p)+869e-6*Math.cos(N-D-T)-627e-6*Math.cos(N)-394e-6*Math.cos(O-g)+282e-6*Math.cos(N-D-p)-279e-6*Math.cos(m-T)-236e-6*Math.cos(p)+231e-6*Math.cos(O)+229e-6*Math.cos(S-g)-201e-6*Math.cos(p-C),c+=486.26*Math.cos(N-C)-40.13*Math.cos(N)+37.51*Math.cos(C)+25.73*Math.cos(p-C)+19.97*Math.cos(N-D-C),P+=-55609*Math.sin(N-T)-34711*Math.sin(N-p)-9792*Math.sin(T)+9385*Math.sin(O-R)+7505*Math.sin(O-p)+5318*Math.sin(N+T)+3484*Math.sin(O-g)-3417*Math.sin(N-D-T)-2530*Math.sin(S-g)-2376*Math.sin(N)-2075*Math.sin(N-R)-1883*Math.sin(p)-1736*Math.sin(S-5*T)+1626*Math.sin(D)-1370*Math.sin(S-R),_+=-5392*Math.sin(N-C)-540*Math.sin(D)-441*Math.sin(N)+423*Math.sin(C)-288*Math.sin(p-C),b+=-3332.9*Math.sin(N)+1197.4*Math.sin(N-T)-662.5*Math.sin(D)+396.3*Math.sin(T)-218*Math.sin(N-D);var W=2*A,Y=3*A;c+=46.997*Math.cos(A)*n-.614*Math.cos(N-C+A)*n+.614*Math.cos(N-C-A)*n-.0297*Math.cos(W)*e-.0335*Math.cos(A)*e+.0012*Math.cos(N-C+W)*e-16e-5*Math.cos(A)*s+4e-5*Math.cos(Y)*s+4e-5*Math.cos(W)*s;var U=2.116*Math.sin(A)*n-.111*Math.sin(N-C-A)*n-.0015*Math.sin(A)*e;return P+=U,b+=U,_+=-520.77*Math.sin(A)*n+13.66*Math.sin(N-C+A)*n+1.12*Math.sin(N-A)*n-1.06*Math.sin(C-A)*n+.66*Math.sin(W)*e+.371*Math.sin(A)*e-.035*Math.sin(N-C+W)*e-.015*Math.sin(N-C+A)*e+.0014*Math.sin(A)*s-.0011*Math.sin(Y)*s-9e-4*Math.sin(W)*s,v(i*=l,M,r+c*y,d+P*y,I+_*y,E+b*y,a)}var It=-.01215058143522694;var _t=new h(1.0000000000000002,5.619723173785822e-16,4.690511510146299e-19,-5.154129427414611e-16,.9174820620691819,-.39777715593191376,-2.23970096136568e-16,.39777715593191376,.9174820620691819),Et=new t;return M.computeSunPositionInEarthInertialFrame=function(n,s){return a(n)||(n=e.now()),a(s)||(s=new t),Et=function(t,a){u(t,vt);var n=(vt.dayNumber-f.dayNumber+(vt.secondsOfDay-f.secondsOfDay)/o.SECONDS_PER_DAY)/(10*o.DAYS_PER_JULIAN_CENTURY),e=.3595362*n,s=_+R*Math.cos(m*e)+L*Math.sin(m*e)+g*Math.cos(T*e)+V*Math.sin(T*e)+C*Math.cos(D*e)+z*Math.sin(D*e)+W*Math.cos(A*e)+J*Math.sin(A*e)+Y*Math.cos(N*e)+x*Math.sin(N*e)+U*Math.cos(O*e)+F*Math.sin(O*e)+q*Math.cos(S*e)+H*Math.sin(S*e)+B*Math.cos(p*e)+G*Math.sin(p*e),h=E+b*n+at*Math.cos(K*e)+rt*Math.sin(K*e)+nt*Math.cos(X*e)+ct*Math.sin(X*e)+et*Math.cos(j*e)+ut*Math.sin(j*e)+st*Math.cos(k*e)+ft*Math.sin(k*e)+ht*Math.cos(Q*e)+lt*Math.sin(Q*e)+ot*Math.cos(Z*e)+wt*Math.sin(Z*e)+it*Math.cos($*e)+yt*Math.sin($*e)+Mt*Math.cos(tt*e)+dt*Math.sin(tt*e);return v(s,.0167086342-.0004203654*n,469.97289*y*n,102.93734808*w+11612.3529*y*n,174.87317577*w-8679.27034*y*n,h,a)}(n,Et),s=t.negate(Et,s),function(a,n){n=Pt(a,n),t.multiplyByScalar(n,It,n)}(n,Et),t.subtract(s,Et,s),h.multiplyByVector(_t,s,s),s},M.computeMoonPositionInEarthInertialFrame=function(t,n){return a(t)||(t=e.now()),n=Pt(t,n),h.multiplyByVector(_t,n,n),n},M});