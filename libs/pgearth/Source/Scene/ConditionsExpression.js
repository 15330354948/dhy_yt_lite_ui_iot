define(["../Core/clone","../Core/defined","../Core/defineProperties","./Expression"],function(n,i,t,e){"use strict";function o(t,o){this._conditionsExpression=n(t,!0),this._conditions=t.conditions,this._runtimeConditions=void 0,function(n,t){var o=[],s=n._conditions;if(!i(s))return;for(var u=s.length,a=0;a<u;++a){var d=s[a],f=String(d[0]),c=String(d[1]);o.push(new r(new e(f,t),new e(c,t)))}n._runtimeConditions=o}(this,o)}function r(n,i){this.condition=n,this.expression=i}return t(o.prototype,{conditionsExpression:{get:function(){return this._conditionsExpression}}}),o.prototype.evaluate=function(n,t){var e=this._runtimeConditions;if(i(e))for(var o=e.length,r=0;r<o;++r){var s=e[r];if(s.condition.evaluate(n))return s.expression.evaluate(n,t)}},o.prototype.evaluateColor=function(n,t){var e=this._runtimeConditions;if(i(e))for(var o=e.length,r=0;r<o;++r){var s=e[r];if(s.condition.evaluate(n))return s.expression.evaluateColor(n,t)}},o.prototype.getShaderFunction=function(n,t,e,o){var r=this._runtimeConditions;if(i(r)&&0!==r.length){for(var s="",u=r.length,a=0;a<u;++a){var d=r[a],f=d.condition.getShaderExpression(t,e),c=d.expression.getShaderExpression(t,e);s+="    "+(0===a?"if":"else if")+" ("+f+") \n    { \n        return "+c+"; \n    } \n"}return s=o+" "+n+"() \n{ \n"+s+"    return "+o+"(1.0); \n} \n"}},o});