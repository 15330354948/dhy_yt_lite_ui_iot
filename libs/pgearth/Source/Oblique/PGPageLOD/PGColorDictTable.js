define(["../../Core/Color","../../Core/defined","../../Core/defineProperties","../../Core/destroyObject"],function(e,t,n,r){"use strict";function l(e){this._elements=new Array}return n(l.prototype,{length:{get:function(){return this._elements.length}}}),l.prototype.insert=function(e,t){for(var n=0;n<this._elements.length;++n)if(this._elements[n].key==e)return void(this._elements[n].value=t);this._elements.push({key:e,value:t}),this._elements.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0})},l.prototype.remove=function(e){for(var t=0;t<this._elements.length;++t)if(this._elements[t].key==e)return this._elements.splice(t,1),!0;return!1},l.prototype.clear=function(){this._elements.splice(0,this._elements.length)},l.prototype.getColor=function(t){if(0!=this._elements.length){var n=this._elements.length;if(t<=this._elements[0].key)return this._elements[0].value;if(t>=this._elements[n-1].key)return this._elements[n-1].value;for(var r=0;r<n;++r)if(this._elements[r].key==t)return this._elements[r].value;var l,s;for(r=0;r<n;++r)this._elements[r].key>t&&(l=this._elements[r-1],s=this._elements[r]);var i=(t-l.key)/(s.key-l.key);return new e(l.value.red*(1-i)+s.value.red*i,l.value.green*(1-i)+s.value.green*i,l.value.blue*(1-i)+s.value.blue*i,l.value.alpha*(1-i)+s.value.alpha*i)}},l.prototype.generateImage=function(t){if(0!=this._elements.length){var n=new Uint8Array(4*t),r=this._elements.length;if(1==r)for(var l=this._elements[0].value.toBytes(),s=0;s<t;++s)n[4*s]=l[0],n[4*s+1]=l[1],n[4*s+2]=l[2],n[4*s+3]=l[3];var i=this._elements[0],u=(this._elements[r-1].key-i.key)/t,a=0,h=this._elements[a],o=this._elements[a+1],v=new e,y=[];for(s=0;s<t;++s){var m=i.key+s*u;m>o.key&&(++a,h=o,o=this._elements[a+1]);var _=(m-h.key)/(o.key-h.key);v.red=h.value.red*(1-_)+o.value.red*_,v.green=h.value.green*(1-_)+o.value.green*_,v.blue=h.value.blue*(1-_)+o.value.blue*_,v.alpha=h.value.alpha*(1-_)+o.value.alpha*_,v.toBytes(y),n[4*s]=y[0],n[4*s+1]=y[1],n[4*s+2]=y[2],n[4*s+3]=y[3]}return{width:t,height:1,arrayBufferView:n}}},l.prototype.destroy=function(){return r(this)},l});