define(["./Cartesian3","./Cartographic","./defaultValue","./defined","./defineProperties","./DeveloperError","./Ellipsoid","./Math"],function(e,t,i,r,o,a,n,u){"use strict";function d(e){this._ellipsoid=i(e,n.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}return o(d.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),d.mercatorAngleToGeodeticLatitude=function(e){return u.PI_OVER_TWO-2*Math.atan(Math.exp(-e))},d.geodeticLatitudeToMercatorAngle=function(e){e>d.MaximumLatitude?e=d.MaximumLatitude:e<-d.MaximumLatitude&&(e=-d.MaximumLatitude);var t=Math.sin(e);return.5*Math.log((1+t)/(1-t))},d.MaximumLatitude=d.mercatorAngleToGeodeticLatitude(Math.PI),d.prototype.project=function(t,i){var o=this._semimajorAxis,a=t.longitude*o,n=d.geodeticLatitudeToMercatorAngle(t.latitude)*o,u=t.height;return r(i)?(i.x=a,i.y=n,i.z=u,i):new e(a,n,u)},d.prototype.unproject=function(e,i){if(!r(e))throw new a("cartesian is required");var o=this._oneOverSemimajorAxis,n=e.x*o,u=d.mercatorAngleToGeodeticLatitude(e.y*o),s=e.z;return r(i)?(i.longitude=n,i.latitude=u,i.height=s,i):new t(n,u,s)},d});