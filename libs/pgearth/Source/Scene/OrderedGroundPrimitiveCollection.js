define(["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/Check","../Core/DeveloperError","./PrimitiveCollection"],function(t,e,o,r,i,n,s){"use strict";function l(){this._length=0,this._collections={},this._collectionsArray=[],this.show=!0}return o(l.prototype,{length:{get:function(){return this._length}}}),l.prototype.add=function(o,r){i.defined("primitive",o),e(r)&&i.typeOf.number("zIndex",r),r=t(r,0);var n=this._collections[r];if(!e(n)){(n=new s({destroyPrimitives:!1}))._zIndex=r,this._collections[r]=n;for(var l=this._collectionsArray,c=0;c<l.length&&l[c]._zIndex<r;)c++;l.splice(c,0,n)}return n.add(o),this._length++,o._zIndex=r,o},l.prototype.set=function(t,e){return i.defined("primitive",t),i.typeOf.number("zIndex",e),e===t._zIndex?t:(this.remove(t,!0),this.add(t,e),t)},l.prototype.remove=function(t,e){if(this.contains(t)){var o,r=t._zIndex,i=this._collections[r];return(o=e?i.remove(t):i.removeAndDestroy(t))&&this._length--,0===i.length&&(this._collectionsArray.splice(this._collectionsArray.indexOf(i),1),this._collections[r]=void 0,i.destroy()),o}return!1},l.prototype.removeAll=function(){for(var t=this._collectionsArray,e=0;e<t.length;e++){var o=t[e];o.destroyPrimitives=!0,o.destroy()}this._collections={},this._collectionsArray=[],this._length=0},l.prototype.contains=function(t){if(!e(t))return!1;var o=this._collections[t._zIndex];return e(o)&&o.contains(t)},l.prototype.update=function(t){if(this.show)for(var e=this._collectionsArray,o=0;o<e.length;o++)e[o].update(t)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this.removeAll(),r(this)},l});