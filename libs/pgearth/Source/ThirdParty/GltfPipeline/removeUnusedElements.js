define(["./ForEach","./hasExtension","../../Core/defined"],function(e,i,n){"use strict";var f={accessor:"accessors",buffer:"buffers",bufferView:"bufferViews"};function r(e,i){var r=e[f[i]];if(n(r))for(var s=0,o=u[i](e),c=r.length,a=0;a<c;++a)o[a]||(t[i](e,a-s),s++)}function t(){}function u(){}return t.accessor=function(i,f){i.accessors.splice(f,1),e.mesh(i,function(i){e.meshPrimitive(i,function(i){e.meshPrimitiveAttribute(i,function(e,n){e>f&&i.attributes[n]--}),e.meshPrimitiveTarget(i,function(i){e.meshPrimitiveTargetAttribute(i,function(e,n){e>f&&i[n]--})});var r=i.indices;n(r)&&r>f&&i.indices--})}),e.skin(i,function(e){n(e.inverseBindMatrices)&&e.inverseBindMatrices>f&&e.inverseBindMatrices--}),e.animation(i,function(i){e.animationSampler(i,function(e){n(e.input)&&e.input>f&&e.input--,n(e.output)&&e.output>f&&e.output--})})},t.buffer=function(i,f){i.buffers.splice(f,1),e.bufferView(i,function(e){n(e.buffer)&&e.buffer>f&&e.buffer--})},t.bufferView=function(f,r){f.bufferViews.splice(r,1),e.accessor(f,function(e){n(e.bufferView)&&e.bufferView>r&&e.bufferView--}),e.shader(f,function(e){n(e.bufferView)&&e.bufferView>r&&e.bufferView--}),e.image(f,function(i){n(i.bufferView)&&i.bufferView>r&&i.bufferView--,e.compressedImage(i,function(e){var i=e.bufferView;n(i)&&i>r&&e.bufferView--})}),i(f,"KHR_draco_mesh_compression")&&e.mesh(f,function(i){e.meshPrimitive(i,function(e){n(e.extensions)&&n(e.extensions.KHR_draco_mesh_compression)&&e.extensions.KHR_draco_mesh_compression.bufferView>r&&e.extensions.KHR_draco_mesh_compression.bufferView--})})},u.accessor=function(i){var f={};return e.mesh(i,function(i){e.meshPrimitive(i,function(i){e.meshPrimitiveAttribute(i,function(e){f[e]=!0}),e.meshPrimitiveTarget(i,function(i){e.meshPrimitiveTargetAttribute(i,function(e){f[e]=!0})});var r=i.indices;n(r)&&(f[r]=!0)})}),e.skin(i,function(e){n(e.inverseBindMatrices)&&(f[e.inverseBindMatrices]=!0)}),e.animation(i,function(i){e.animationSampler(i,function(e){n(e.input)&&(f[e.input]=!0),n(e.output)&&(f[e.output]=!0)})}),f},u.buffer=function(i){var f={};return e.bufferView(i,function(e){n(e.buffer)&&(f[e.buffer]=!0)}),f},u.bufferView=function(f){var r={};return e.accessor(f,function(e){n(e.bufferView)&&(r[e.bufferView]=!0)}),e.shader(f,function(e){n(e.bufferView)&&(r[e.bufferView]=!0)}),e.image(f,function(i){n(i.bufferView)&&(r[i.bufferView]=!0),e.compressedImage(i,function(e){n(e.bufferView)&&(r[e.bufferView]=!0)})}),i(f,"KHR_draco_mesh_compression")&&e.mesh(f,function(i){e.meshPrimitive(i,function(e){n(e.extensions)&&n(e.extensions.KHR_draco_mesh_compression)&&(r[e.extensions.KHR_draco_mesh_compression.bufferView]=!0)})}),r},function(e){return r(e,"accessor"),r(e,"bufferView"),r(e,"buffer"),e}});