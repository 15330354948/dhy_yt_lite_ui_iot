define(["./Check","./defaultValue","./defined","./defineProperties"],function(t,e,r,n){"use strict";function i(e){t.typeOf.object("options",e),t.defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function h(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}return n(i.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(t){this._maximumLength=t,this._length>t&&t>0&&(this._length=t,this._array.length=t)}},comparator:{get:function(){return this._comparator}}}),i.prototype.reserve=function(t){t=e(t,this._length),this._array.length=t},i.prototype.heapify=function(t){t=e(t,0);for(var r=this._length,n=this._comparator,i=this._array,o=-1,a=!0;a;){var s=2*(t+1),p=s-1;o=p<r&&n(i[p],i[t])<0?p:t,s<r&&n(i[s],i[o])<0&&(o=s),o!==t?(h(i,o,t),t=o):a=!1}},i.prototype.resort=function(){for(var t=this._length,e=Math.ceil(t/2);e>=0;--e)this.heapify(e)},i.prototype.insert=function(e){t.defined("element",e);var n,i=this._array,o=this._comparator,a=this._maximumLength,s=this._length++;for(s<i.length?i[s]=e:i.push(e);0!==s;){var p=Math.floor((s-1)/2);if(!(o(i[s],i[p])<0))break;h(i,s,p),s=p}return r(a)&&this._length>a&&(n=i[a],this._length=a),n},i.prototype.pop=function(r){if(r=e(r,0),0!==this._length){t.typeOf.number.lessThan("index",r,this._length);var n=this._array,i=n[r];return h(n,r,--this._length),this.heapify(r),i}},i});