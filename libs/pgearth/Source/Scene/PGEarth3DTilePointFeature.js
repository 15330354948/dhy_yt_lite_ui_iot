define(["../Core/Cartographic","../Core/Color","../Core/defaultValue","../Core/defined","../Core/defineProperties","./createBillboardPointCallback"],function(t,i,e,n,o,l){"use strict";function r(t,i,e,n,o){this._content=t,this._billboard=e,this._label=n,this._polyline=o,this._batchId=i,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),a(this)}var s=new t;function a(t){var o=t._billboard;if(n(t._billboardImage)&&t._billboardImage!==o.image)o.image=t._billboardImage;else if(!n(t._billboardImage)){var s=e(t._color,r.defaultColor),a=e(t._pointOutlineColor,r.defaultPointOutlineColor),h=e(t._pointOutlineWidth,r.defaultPointOutlineWidth),c=e(t._pointSize,r.defaultPointSize),u=t._billboardColor,b=t._billboardOutlineColor,_=t._billboardOutlineWidth,d=t._billboardSize;if(!i.equals(s,u)||!i.equals(a,b)||h!==_||c!==d){t._billboardColor=i.clone(s,t._billboardColor),t._billboardOutlineColor=i.clone(a,t._billboardOutlineColor),t._billboardOutlineWidth=h,t._billboardSize=c;var f=s.alpha,g=s.toCssColorString(),p=a.toCssColorString(),C=JSON.stringify([g,c,p,h]);o.setImage(C,l(f,g,p,h,c))}}}return o(r.prototype,{show:{get:function(){return this._label.show},set:function(t){this._label.show=t,this._billboard.show=t,this._polyline.show=t}},color:{get:function(){return this._color},set:function(t){this._color=i.clone(t,this._color),a(this)}},pointSize:{get:function(){return this._pointSize},set:function(t){this._pointSize=t,a(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(t){this._pointOutlineColor=i.clone(t,this._pointOutlineColor),a(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(t){this._pointOutlineWidth=t,a(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(t){this._label.fillColor=t,this._polyline.show=this._label.show&&t.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(t){this._label.outlineColor=t}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(t){this._label.outlineWidth=t}},font:{get:function(){return this._label.font},set:function(t){this._label.font=t}},labelStyle:{get:function(){return this._label.style},set:function(t){this._label.style=t}},labelText:{get:function(){return this._label.text},set:function(t){n(t)||(t=""),this._label.text=t}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(t){this._label.backgroundColor=t}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(t){this._label.backgroundPadding=t}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(t){this._label.showBackground=t}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(t){this._label.scaleByDistance=t,this._billboard.scaleByDistance=t}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(t){this._label.translucencyByDistance=t,this._billboard.translucencyByDistance=t}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(t){this._label.distanceDisplayCondition=t,this._polyline.distanceDisplayCondition=t,this._billboard.distanceDisplayCondition=t}},heightOffset:{get:function(){return this._heightOffset},set:function(t){var i=e(this._heightOffset,0),n=this._content.tileset.ellipsoid,o=n.cartesianToCartographic(this._billboard.position,s);o.height=o.height-i+t;var l=n.cartographicToCartesian(o);this._billboard.position=l,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],l],this._heightOffset=t}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(t){this._polyline.show=t}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(t){this._polyline.material.uniforms.color=i.clone(t,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(t){var i=this._billboardImage!==t;this._billboardImage=t,i&&a(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(t){this._label.disableDepthTestDistance=t,this._billboard.disableDepthTestDistance=t}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(t){this._billboard.horizontalOrigin=t}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(t){this._billboard.verticalOrigin=t}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(t){this._label.horizontalOrigin=t}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(t){this._label.verticalOrigin=t}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){var t=this._pickIds;return t[0]=this._billboard.pickId,t[1]=this._label.pickId,t[2]=this._polyline.pickId,t}}}),r.defaultColor=i.WHITE,r.defaultPointOutlineColor=i.BLACK,r.defaultPointOutlineWidth=0,r.defaultPointSize=8,r.prototype.hasProperty=function(t){return this._content.batchTable.hasProperty(this._batchId,t)},r.prototype.getPropertyNames=function(t){return this._content.batchTable.getPropertyNames(this._batchId,t)},r.prototype.getProperty=function(t){return this._content.batchTable.getProperty(this._batchId,t)},r.prototype.setProperty=function(t,i){this._content.batchTable.setProperty(this._batchId,t,i),this._content.featurePropertiesDirty=!0},r.prototype.isExactClass=function(t){return this._content.batchTable.isExactClass(this._batchId,t)},r.prototype.isClass=function(t){return this._content.batchTable.isClass(this._batchId,t)},r.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)},r});