define(["./Cartesian2","./Check","./defaultValue","./defined","./defineProperties","./Ellipsoid","./GeographicProjection","./Math","./Rectangle"],function(e,t,r,i,o,n,s,l,u){"use strict";function h(e){e=r(e,{}),this._ellipsoid=r(e.ellipsoid,n.WGS84),this._rectangle=r(e.rectangle,u.MAX_VALUE),this._projection=new s(this._ellipsoid),this._numberOfLevelZeroTilesX=r(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=r(e.numberOfLevelZeroTilesY,1)}return o(h.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),h.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},h.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},h.prototype.rectangleToNativeRectangle=function(e,r){t.defined("rectangle",e);var o=l.toDegrees(e.west),n=l.toDegrees(e.south),s=l.toDegrees(e.east),h=l.toDegrees(e.north);return i(r)?(r.west=o,r.south=n,r.east=s,r.north=h,r):new u(o,n,s,h)},h.prototype.tileXYToNativeRectangle=function(e,t,r,i){var o=this.tileXYToRectangle(e,t,r,i);return o.west=l.toDegrees(o.west),o.south=l.toDegrees(o.south),o.east=l.toDegrees(o.east),o.north=l.toDegrees(o.north),o},h.prototype.tileXYToRectangle=function(e,t,r,o){var n=this._rectangle,s=this.getNumberOfXTilesAtLevel(r),l=this.getNumberOfYTilesAtLevel(r),h=n.width/s,a=e*h+n.west,g=(e+1)*h+n.west,c=n.height/l,f=n.north-t*c,p=n.north-(t+1)*c;return i(o)||(o=new u(a,p,g,f)),o.west=a,o.south=p,o.east=g,o.north=f,o},h.prototype.positionToTileXY=function(t,r,o){var n=this._rectangle;if(u.contains(n,t)){var s=this.getNumberOfXTilesAtLevel(r),h=this.getNumberOfYTilesAtLevel(r),a=n.width/s,g=n.height/h,c=t.longitude;n.east<n.west&&(c+=l.TWO_PI);var f=(c-n.west)/a|0;f>=s&&(f=s-1);var p=(n.north-t.latitude)/g|0;return p>=h&&(p=h-1),i(o)?(o.x=f,o.y=p,o):new e(f,p)}},h});