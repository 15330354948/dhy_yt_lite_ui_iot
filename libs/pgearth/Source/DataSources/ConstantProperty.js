define(["../Core/defined","../Core/defineProperties","../Core/Event"],function(t,e,i){"use strict";function n(t){this._value=void 0,this._hasClone=!1,this._hasEquals=!1,this._definitionChanged=new i,this.setValue(t)}return e(n.prototype,{isConstant:{value:!0},definitionChanged:{get:function(){return this._definitionChanged}}}),n.prototype.getValue=function(t,e){return this._hasClone?this._value.clone(e):this._value},n.prototype.setValue=function(e){var i=this._value;if(i!==e){var n=t(e),s=n&&"function"==typeof e.clone,o=n&&"function"==typeof e.equals;(!o||!e.equals(i))&&(this._hasClone=s,this._hasEquals=o,this._value=s?e.clone(this._value):e,this._definitionChanged.raiseEvent(this))}},n.prototype.equals=function(t){return this===t||t instanceof n&&(!this._hasEquals&&this._value===t._value||this._hasEquals&&this._value.equals(t._value))},n.prototype.valueOf=function(){return this._value},n.prototype.toString=function(){return String(this._value)},n});