define(["./Cartesian3","./Check","./defaultValue","./defined","./defineProperties","./DeveloperError","./freezeObject","./Math"],function(t,e,n,r,a,o,u,i){"use strict";function f(t,e,r,a,o,u,i,f,c){this[0]=n(t,0),this[1]=n(a,0),this[2]=n(i,0),this[3]=n(e,0),this[4]=n(o,0),this[5]=n(f,0),this[6]=n(r,0),this[7]=n(u,0),this[8]=n(c,0)}f.packedLength=9,f.pack=function(t,r,a){return e.typeOf.object("value",t),e.defined("array",r),a=n(a,0),r[a++]=t[0],r[a++]=t[1],r[a++]=t[2],r[a++]=t[3],r[a++]=t[4],r[a++]=t[5],r[a++]=t[6],r[a++]=t[7],r[a++]=t[8],r},f.unpack=function(t,a,o){return e.defined("array",t),a=n(a,0),r(o)||(o=new f),o[0]=t[a++],o[1]=t[a++],o[2]=t[a++],o[3]=t[a++],o[4]=t[a++],o[5]=t[a++],o[6]=t[a++],o[7]=t[a++],o[8]=t[a++],o},f.clone=function(t,e){if(r(t))return r(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e):new f(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},f.fromArray=function(t,a,o){return e.defined("array",t),a=n(a,0),r(o)||(o=new f),o[0]=t[a],o[1]=t[a+1],o[2]=t[a+2],o[3]=t[a+3],o[4]=t[a+4],o[5]=t[a+5],o[6]=t[a+6],o[7]=t[a+7],o[8]=t[a+8],o},f.fromColumnMajorArray=function(t,n){return e.defined("values",t),f.clone(t,n)},f.fromRowMajorArray=function(t,n){return e.defined("values",t),r(n)?(n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8],n):new f(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},f.fromQuaternion=function(t,n){e.typeOf.object("quaternion",t);var a=t.x*t.x,o=t.x*t.y,u=t.x*t.z,i=t.x*t.w,c=t.y*t.y,s=t.y*t.z,l=t.y*t.w,y=t.z*t.z,p=t.z*t.w,O=t.w*t.w,m=a-c-y+O,b=2*(o-p),h=2*(u+l),x=2*(o+p),M=-a+c-y+O,d=2*(s-i),j=2*(u-l),g=2*(s+i),E=-a-c+y+O;return r(n)?(n[0]=m,n[1]=x,n[2]=j,n[3]=b,n[4]=M,n[5]=g,n[6]=h,n[7]=d,n[8]=E,n):new f(m,b,h,x,M,d,j,g,E)},f.fromHeadingPitchRoll=function(t,n){e.typeOf.object("headingPitchRoll",t);var a=Math.cos(-t.pitch),o=Math.cos(-t.heading),u=Math.cos(t.roll),i=Math.sin(-t.pitch),c=Math.sin(-t.heading),s=Math.sin(t.roll),l=a*o,y=-u*c+s*i*o,p=s*c+u*i*o,O=a*c,m=u*o+s*i*c,b=-s*o+u*i*c,h=-i,x=s*a,M=u*a;return r(n)?(n[0]=l,n[1]=O,n[2]=h,n[3]=y,n[4]=m,n[5]=x,n[6]=p,n[7]=b,n[8]=M,n):new f(l,y,p,O,m,b,h,x,M)},f.fromScale=function(t,n){return e.typeOf.object("scale",t),r(n)?(n[0]=t.x,n[1]=0,n[2]=0,n[3]=0,n[4]=t.y,n[5]=0,n[6]=0,n[7]=0,n[8]=t.z,n):new f(t.x,0,0,0,t.y,0,0,0,t.z)},f.fromUniformScale=function(t,n){return e.typeOf.number("scale",t),r(n)?(n[0]=t,n[1]=0,n[2]=0,n[3]=0,n[4]=t,n[5]=0,n[6]=0,n[7]=0,n[8]=t,n):new f(t,0,0,0,t,0,0,0,t)},f.fromCrossProduct=function(t,n){return e.typeOf.object("vector",t),r(n)?(n[0]=0,n[1]=t.z,n[2]=-t.y,n[3]=-t.z,n[4]=0,n[5]=t.x,n[6]=t.y,n[7]=-t.x,n[8]=0,n):new f(0,-t.z,t.y,t.z,0,-t.x,-t.y,t.x,0)},f.fromRotationX=function(t,n){e.typeOf.number("angle",t);var a=Math.cos(t),o=Math.sin(t);return r(n)?(n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=a,n[5]=o,n[6]=0,n[7]=-o,n[8]=a,n):new f(1,0,0,0,a,-o,0,o,a)},f.fromRotationY=function(t,n){e.typeOf.number("angle",t);var a=Math.cos(t),o=Math.sin(t);return r(n)?(n[0]=a,n[1]=0,n[2]=-o,n[3]=0,n[4]=1,n[5]=0,n[6]=o,n[7]=0,n[8]=a,n):new f(a,0,o,0,1,0,-o,0,a)},f.fromRotationZ=function(t,n){e.typeOf.number("angle",t);var a=Math.cos(t),o=Math.sin(t);return r(n)?(n[0]=a,n[1]=o,n[2]=0,n[3]=-o,n[4]=a,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n):new f(a,-o,0,o,a,0,0,0,1)},f.toArray=function(t,n){return e.typeOf.object("matrix",t),r(n)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n):[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},f.getElementIndex=function(t,n){return e.typeOf.number.greaterThanOrEquals("row",n,0),e.typeOf.number.lessThanOrEquals("row",n,2),e.typeOf.number.greaterThanOrEquals("column",t,0),e.typeOf.number.lessThanOrEquals("column",t,2),3*t+n},f.getColumn=function(t,n,r){e.typeOf.object("matrix",t),e.typeOf.number.greaterThanOrEquals("index",n,0),e.typeOf.number.lessThanOrEquals("index",n,2),e.typeOf.object("result",r);var a=3*n,o=t[a],u=t[a+1],i=t[a+2];return r.x=o,r.y=u,r.z=i,r},f.setColumn=function(t,n,r,a){e.typeOf.object("matrix",t),e.typeOf.number.greaterThanOrEquals("index",n,0),e.typeOf.number.lessThanOrEquals("index",n,2),e.typeOf.object("cartesian",r),e.typeOf.object("result",a);var o=3*n;return(a=f.clone(t,a))[o]=r.x,a[o+1]=r.y,a[o+2]=r.z,a},f.getRow=function(t,n,r){e.typeOf.object("matrix",t),e.typeOf.number.greaterThanOrEquals("index",n,0),e.typeOf.number.lessThanOrEquals("index",n,2),e.typeOf.object("result",r);var a=t[n],o=t[n+3],u=t[n+6];return r.x=a,r.y=o,r.z=u,r},f.setRow=function(t,n,r,a){return e.typeOf.object("matrix",t),e.typeOf.number.greaterThanOrEquals("index",n,0),e.typeOf.number.lessThanOrEquals("index",n,2),e.typeOf.object("cartesian",r),e.typeOf.object("result",a),(a=f.clone(t,a))[n]=r.x,a[n+3]=r.y,a[n+6]=r.z,a};var c=new t;f.getScale=function(n,r){return e.typeOf.object("matrix",n),e.typeOf.object("result",r),r.x=t.magnitude(t.fromElements(n[0],n[1],n[2],c)),r.y=t.magnitude(t.fromElements(n[3],n[4],n[5],c)),r.z=t.magnitude(t.fromElements(n[6],n[7],n[8],c)),r};var s=new t;f.getMaximumScale=function(e){return f.getScale(e,s),t.maximumComponent(s)},f.multiply=function(t,n,r){e.typeOf.object("left",t),e.typeOf.object("right",n),e.typeOf.object("result",r);var a=t[0]*n[0]+t[3]*n[1]+t[6]*n[2],o=t[1]*n[0]+t[4]*n[1]+t[7]*n[2],u=t[2]*n[0]+t[5]*n[1]+t[8]*n[2],i=t[0]*n[3]+t[3]*n[4]+t[6]*n[5],f=t[1]*n[3]+t[4]*n[4]+t[7]*n[5],c=t[2]*n[3]+t[5]*n[4]+t[8]*n[5],s=t[0]*n[6]+t[3]*n[7]+t[6]*n[8],l=t[1]*n[6]+t[4]*n[7]+t[7]*n[8],y=t[2]*n[6]+t[5]*n[7]+t[8]*n[8];return r[0]=a,r[1]=o,r[2]=u,r[3]=i,r[4]=f,r[5]=c,r[6]=s,r[7]=l,r[8]=y,r},f.add=function(t,n,r){return e.typeOf.object("left",t),e.typeOf.object("right",n),e.typeOf.object("result",r),r[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r[3]=t[3]+n[3],r[4]=t[4]+n[4],r[5]=t[5]+n[5],r[6]=t[6]+n[6],r[7]=t[7]+n[7],r[8]=t[8]+n[8],r},f.subtract=function(t,n,r){return e.typeOf.object("left",t),e.typeOf.object("right",n),e.typeOf.object("result",r),r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],r[3]=t[3]-n[3],r[4]=t[4]-n[4],r[5]=t[5]-n[5],r[6]=t[6]-n[6],r[7]=t[7]-n[7],r[8]=t[8]-n[8],r},f.multiplyByVector=function(t,n,r){e.typeOf.object("matrix",t),e.typeOf.object("cartesian",n),e.typeOf.object("result",r);var a=n.x,o=n.y,u=n.z,i=t[0]*a+t[3]*o+t[6]*u,f=t[1]*a+t[4]*o+t[7]*u,c=t[2]*a+t[5]*o+t[8]*u;return r.x=i,r.y=f,r.z=c,r},f.multiplyByScalar=function(t,n,r){return e.typeOf.object("matrix",t),e.typeOf.number("scalar",n),e.typeOf.object("result",r),r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r[4]=t[4]*n,r[5]=t[5]*n,r[6]=t[6]*n,r[7]=t[7]*n,r[8]=t[8]*n,r},f.multiplyByScale=function(t,n,r){return e.typeOf.object("matrix",t),e.typeOf.object("scale",n),e.typeOf.object("result",r),r[0]=t[0]*n.x,r[1]=t[1]*n.x,r[2]=t[2]*n.x,r[3]=t[3]*n.y,r[4]=t[4]*n.y,r[5]=t[5]*n.y,r[6]=t[6]*n.z,r[7]=t[7]*n.z,r[8]=t[8]*n.z,r},f.negate=function(t,n){return e.typeOf.object("matrix",t),e.typeOf.object("result",n),n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n[4]=-t[4],n[5]=-t[5],n[6]=-t[6],n[7]=-t[7],n[8]=-t[8],n},f.transpose=function(t,n){e.typeOf.object("matrix",t),e.typeOf.object("result",n);var r=t[0],a=t[3],o=t[6],u=t[1],i=t[4],f=t[7],c=t[2],s=t[5],l=t[8];return n[0]=r,n[1]=a,n[2]=o,n[3]=u,n[4]=i,n[5]=f,n[6]=c,n[7]=s,n[8]=l,n};var l=[1,0,0],y=[2,2,1];function p(t){for(var e=0,n=0;n<3;++n){var r=t[f.getElementIndex(y[n],l[n])];e+=2*r*r}return Math.sqrt(e)}function O(t,e){for(var n=i.EPSILON15,r=0,a=1,o=0;o<3;++o){var u=Math.abs(t[f.getElementIndex(y[o],l[o])]);u>r&&(a=o,r=u)}var c=1,s=0,p=l[a],O=y[a];if(Math.abs(t[f.getElementIndex(O,p)])>n){var m,b=(t[f.getElementIndex(O,O)]-t[f.getElementIndex(p,p)])/2/t[f.getElementIndex(O,p)];s=(m=b<0?-1/(-b+Math.sqrt(1+b*b)):1/(b+Math.sqrt(1+b*b)))*(c=1/Math.sqrt(1+m*m))}return(e=f.clone(f.IDENTITY,e))[f.getElementIndex(p,p)]=e[f.getElementIndex(O,O)]=c,e[f.getElementIndex(O,p)]=s,e[f.getElementIndex(p,O)]=-s,e}var m=new f,b=new f;return f.computeEigenDecomposition=function(t,n){e.typeOf.object("matrix",t);var a=i.EPSILON20,o=0,u=0;r(n)||(n={});for(var c=n.unitary=f.clone(f.IDENTITY,n.unitary),s=n.diagonal=f.clone(t,n.diagonal),l=a*function(t){for(var e=0,n=0;n<9;++n){var r=t[n];e+=r*r}return Math.sqrt(e)}(s);u<10&&p(s)>l;)O(s,m),f.transpose(m,b),f.multiply(s,m,s),f.multiply(b,s,s),f.multiply(c,m,c),++o>2&&(++u,o=0);return n},f.abs=function(t,n){return e.typeOf.object("matrix",t),e.typeOf.object("result",n),n[0]=Math.abs(t[0]),n[1]=Math.abs(t[1]),n[2]=Math.abs(t[2]),n[3]=Math.abs(t[3]),n[4]=Math.abs(t[4]),n[5]=Math.abs(t[5]),n[6]=Math.abs(t[6]),n[7]=Math.abs(t[7]),n[8]=Math.abs(t[8]),n},f.determinant=function(t){e.typeOf.object("matrix",t);var n=t[0],r=t[3],a=t[6],o=t[1],u=t[4],i=t[7],f=t[2],c=t[5],s=t[8];return n*(u*s-c*i)+o*(c*a-r*s)+f*(r*i-u*a)},f.inverse=function(t,n){e.typeOf.object("matrix",t),e.typeOf.object("result",n);var r=t[0],a=t[1],u=t[2],c=t[3],s=t[4],l=t[5],y=t[6],p=t[7],O=t[8],m=f.determinant(t);if(Math.abs(m)<=i.EPSILON15)throw new o("matrix is not invertible");n[0]=s*O-p*l,n[1]=p*u-a*O,n[2]=a*l-s*u,n[3]=y*l-c*O,n[4]=r*O-y*u,n[5]=c*u-r*l,n[6]=c*p-y*s,n[7]=y*a-r*p,n[8]=r*s-c*a;var b=1/m;return f.multiplyByScalar(n,b,n)},f.equals=function(t,e){return t===e||r(t)&&r(e)&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},f.equalsEpsilon=function(t,n,a){return e.typeOf.number("epsilon",a),t===n||r(t)&&r(n)&&Math.abs(t[0]-n[0])<=a&&Math.abs(t[1]-n[1])<=a&&Math.abs(t[2]-n[2])<=a&&Math.abs(t[3]-n[3])<=a&&Math.abs(t[4]-n[4])<=a&&Math.abs(t[5]-n[5])<=a&&Math.abs(t[6]-n[6])<=a&&Math.abs(t[7]-n[7])<=a&&Math.abs(t[8]-n[8])<=a},f.IDENTITY=u(new f(1,0,0,0,1,0,0,0,1)),f.ZERO=u(new f(0,0,0,0,0,0,0,0,0)),f.COLUMN0ROW0=0,f.COLUMN0ROW1=1,f.COLUMN0ROW2=2,f.COLUMN1ROW0=3,f.COLUMN1ROW1=4,f.COLUMN1ROW2=5,f.COLUMN2ROW0=6,f.COLUMN2ROW1=7,f.COLUMN2ROW2=8,a(f.prototype,{length:{get:function(){return f.packedLength}}}),f.prototype.clone=function(t){return f.clone(this,t)},f.prototype.equals=function(t){return f.equals(this,t)},f.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]&&t[4]===e[n+4]&&t[5]===e[n+5]&&t[6]===e[n+6]&&t[7]===e[n+7]&&t[8]===e[n+8]},f.prototype.equalsEpsilon=function(t,e){return f.equalsEpsilon(this,t,e)},f.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},f});