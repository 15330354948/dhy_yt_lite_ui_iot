define(["../Core/buildModuleUrl","../Core/Cartesian3","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/Ellipsoid","../Core/IauOrientationAxes","../Core/Matrix3","../Core/Matrix4","../Core/Simon1994PlanetaryPositions","../Core/Transforms","./EllipsoidPrimitive","./Material"],function(i,e,t,o,r,s,n,l,a,d,u,m,p,h){"use strict";function y(e){var r=(e=t(e,t.EMPTY_OBJECT)).textureUrl;o(r)||(r=i("Assets/Textures/moonSmall.jpg")),this.show=t(e.show,!0),this.textureUrl=r,this._ellipsoid=t(e.ellipsoid,n.MOON),this.onlySunLighting=t(e.onlySunLighting,!0),this._ellipsoidPrimitive=new p({radii:this.ellipsoid.radii,material:h.fromType(h.ImageType),depthTestEnabled:!1,_owner:this}),this._ellipsoidPrimitive.material.translucent=!1,this._axes=new l}r(y.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});var c=new a,f=new a,v=new e,g=[];return y.prototype.update=function(i){if(this.show){var e=this._ellipsoidPrimitive;e.material.uniforms.image=this.textureUrl,e.onlySunLighting=this.onlySunLighting;var t=i.time;o(m.computeIcrfToFixedMatrix(t,c))||m.computeTemeToPseudoFixedMatrix(t,c);var r=this._axes.evaluate(t,f);a.transpose(r,r),a.multiply(c,r,r);var s=u.computeMoonPositionInEarthInertialFrame(t,v);a.multiplyByVector(c,s,s),d.fromRotationTranslation(r,s,e.modelMatrix);var n=i.commandList;return i.commandList=g,g.length=0,e.update(i),i.commandList=n,1===g.length?g[0]:void 0}},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){return this._ellipsoidPrimitive=this._ellipsoidPrimitive&&this._ellipsoidPrimitive.destroy(),s(this)},y});