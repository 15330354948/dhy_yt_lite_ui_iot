define(["../../../../Core/defined","../../../../Core/Ray","../../../../Core/Cartesian3","../../../../Core/Cartographic","../../../../Core/ReferenceFrame","../../../../Scene/SceneMode"],function(e,o,r,i,n,t){"use strict";var a={},c=new i,C=new o;return a.getCameraFocus=function(o,i,n){var a=o.scene,d=a.camera;if(a.mode!=t.MORPHING&&(e(n)||(n=new r),e(o.trackedEntity)?n=o.trackedEntity.position.getValue(o.clock.currentTime,n):(C.origin=d.positionWC,C.direction=d.directionWC,n=a.globe.pick(C,a,n)),e(n)))return a.mode==t.SCENE2D||a.mode==t.COLUMBUS_VIEW?(n=d.worldToCameraCoordinatesPoint(n,n),i&&(n=a.globe.ellipsoid.cartographicToCartesian(a.mapProjection.unproject(n,c),n))):i||(n=d.worldToCameraCoordinatesPoint(n,n)),n},a});