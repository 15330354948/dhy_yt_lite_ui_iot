define(["./defaultValue","./defined","./defineProperties","./DeveloperError","./Fullscreen","../ThirdParty/when"],function(e,r,n,t,i,u){"use strict";var o,s,a,f,l,p,d,c,A,y,g,v,m,b,h,x,E;function w(e){for(var r=e.split("."),n=0,t=r.length;n<t;++n)r[n]=parseInt(r[n],10);return r}function _(){if(!r(s)&&(s=!1,!P())){var e=/ Chrome\/([\.0-9]+)/.exec(o.userAgent);null!==e&&(s=!0,a=w(e[1]))}return s}function W(){if(!r(f)&&(f=!1,!_()&&!P()&&/ Safari\/[\.0-9]+/.test(o.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(o.userAgent);null!==e&&(f=!0,l=w(e[1]))}return f}function I(){if(!r(p)){p=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(o.userAgent);null!==e&&(p=!0,(d=w(e[1])).isNightly=!!e[2])}return p}function V(){var e;r(c)||(c=!1,"Microsoft Internet Explorer"===o.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(o.userAgent))&&(c=!0,A=w(e[1])):"Netscape"===o.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(o.userAgent))&&(c=!0,A=w(e[1])));return c}function P(){if(!r(y)){y=!1;var e=/ Edge\/([\.0-9]+)/.exec(o.userAgent);null!==e&&(y=!0,g=w(e[1]))}return y}function C(){if(!r(v)){v=!1;var e=/Firefox\/([\.0-9]+)/.exec(o.userAgent);null!==e&&(v=!0,m=w(e[1]))}return v}function F(){if(!r(E)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var n=e.style.imageRendering;(E=r(n)&&""!==n)&&(x=n)}return E}function U(){if(!U.initialized)throw new t("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return U._result}o="undefined"!=typeof navigator?navigator:{},U._promise=void 0,U._result=void 0,U.initialize=function(){if(r(U._promise))return U._promise;var e=u.defer();if(U._promise=e.promise,P())return U._result=!1,e.resolve(U._result),e.promise;var n=new Image;return n.onload=function(){U._result=n.width>0&&n.height>0,e.resolve(U._result)},n.onerror=function(){U._result=!1,e.resolve(U._result)},n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},n(U,{initialized:{get:function(){return r(U._result)}}});var k=[];"undefined"!=typeof ArrayBuffer&&(k.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&k.push(Uint8ClampedArray),"undefined"!=typeof CanvasPixelArray&&k.push(CanvasPixelArray));var z={isChrome:_,chromeVersion:function(){return _()&&a},isSafari:W,safariVersion:function(){return W()&&l},isWebkit:I,webkitVersion:function(){return I()&&d},isInternetExplorer:V,internetExplorerVersion:function(){return V()&&A},isEdge:P,edgeVersion:function(){return P()&&g},isFirefox:C,firefoxVersion:function(){return C()&&m},isWindows:function(){return r(b)||(b=/Windows/i.test(o.appVersion)),b},hardwareConcurrency:e(o.hardwareConcurrency,3),supportsPointerEvents:function(){return r(h)||(h=!C()&&"undefined"!=typeof PointerEvent&&(!r(o.pointerEnabled)||o.pointerEnabled)),h},supportsImageRenderingPixelated:F,supportsWebP:U,imageRenderingValue:function(){return F()?x:void 0},typedArrayTypes:k,supportsFullscreen:function(){return i.supportsFullscreen()},supportsTypedArrays:function(){return"undefined"!=typeof ArrayBuffer},supportsWebWorkers:function(){return"undefined"!=typeof Worker},supportsWebAssembly:function(){return"undefined"!=typeof WebAssembly&&!z.isEdge()}};return z});