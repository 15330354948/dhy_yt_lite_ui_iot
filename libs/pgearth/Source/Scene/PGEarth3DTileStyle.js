define(["../Core/clone","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Resource","../ThirdParty/when","./ConditionsExpression","./Expression"],function(t,e,i,o,r,n,s,l,a){"use strict";function h(o){var r;(this._style={},this._ready=!1,this._show=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._labelColor=void 0,this._labelOutlineColor=void 0,this._labelOutlineWidth=void 0,this._font=void 0,this._labelStyle=void 0,this._labelText=void 0,this._backgroundColor=void 0,this._backgroundPadding=void 0,this._backgroundEnabled=void 0,this._scaleByDistance=void 0,this._translucencyByDistance=void 0,this._distanceDisplayCondition=void 0,this._heightOffset=void 0,this._anchorLineEnabled=void 0,this._anchorLineColor=void 0,this._image=void 0,this._disableDepthTestDistance=void 0,this._horizontalOrigin=void 0,this._verticalOrigin=void 0,this._labelHorizontalOrigin=void 0,this._labelVerticalOrigin=void 0,this._meta=void 0,this._colorShaderFunction=void 0,this._showShaderFunction=void 0,this._pointSizeShaderFunction=void 0,this._colorShaderFunctionReady=!1,this._showShaderFunctionReady=!1,this._pointSizeShaderFunctionReady=!1,this._colorShaderTranslucent=!1,"string"==typeof o||o instanceof n)?r=n.createIfNeeded(o).fetchJson(o):r=s.resolve(o);var l=this;this._readyPromise=r.then(function(o){return function(o,r){r=e(t(r,!0),o._style),o._style=r,o.show=r.show,o.color=r.color,o.pointSize=r.pointSize,o.pointOutlineColor=r.pointOutlineColor,o.pointOutlineWidth=r.pointOutlineWidth,o.labelColor=r.labelColor,o.labelOutlineColor=r.labelOutlineColor,o.labelOutlineWidth=r.labelOutlineWidth,o.labelStyle=r.labelStyle,o.font=r.font,o.labelText=r.labelText,o.backgroundColor=r.backgroundColor,o.backgroundPadding=r.backgroundPadding,o.backgroundEnabled=r.backgroundEnabled,o.scaleByDistance=r.scaleByDistance,o.translucencyByDistance=r.translucencyByDistance,o.distanceDisplayCondition=r.distanceDisplayCondition,o.heightOffset=r.heightOffset,o.anchorLineEnabled=r.anchorLineEnabled,o.anchorLineColor=r.anchorLineColor,o.image=r.image,o.disableDepthTestDistance=r.disableDepthTestDistance,o.horizontalOrigin=r.horizontalOrigin,o.verticalOrigin=r.verticalOrigin,o.labelHorizontalOrigin=r.labelHorizontalOrigin,o.labelVerticalOrigin=r.labelVerticalOrigin;var n={};if(i(r.meta)){var s=r.defines,l=e(r.meta,e.EMPTY_OBJECT);for(var h in l)l.hasOwnProperty(h)&&(n[h]=new a(l[h],s))}o._meta=n,o._ready=!0}(l,o),l})}function d(t,o){var r=e(t._style,e.EMPTY_OBJECT).defines;if(i(o))return"boolean"==typeof o||"number"==typeof o?new a(String(o)):"string"==typeof o?new a(o,r):i(o.conditions)?new l(o,r):o}function y(e){if(i(e))return i(e.expression)?e.expression:i(e.conditionsExpression)?t(e.conditionsExpression,!0):e}return o(h.prototype,{style:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._style}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},show:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._show},set:function(t){this._show=d(this,t),this._style.show=y(this._show),this._showShaderFunctionReady=!1}},color:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._color},set:function(t){this._color=d(this,t),this._style.color=y(this._color),this._colorShaderFunctionReady=!1}},pointSize:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._pointSize},set:function(t){this._pointSize=d(this,t),this._style.pointSize=y(this._pointSize),this._pointSizeShaderFunctionReady=!1}},pointOutlineColor:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._pointOutlineColor},set:function(t){this._pointOutlineColor=d(this,t),this._style.pointOutlineColor=y(this._pointOutlineColor)}},pointOutlineWidth:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._pointOutlineWidth},set:function(t){this._pointOutlineWidth=d(this,t),this._style.pointOutlineWidth=y(this._pointOutlineWidth)}},labelColor:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._labelColor},set:function(t){this._labelColor=d(this,t),this._style.labelColor=y(this._labelColor)}},labelOutlineColor:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._labelOutlineColor},set:function(t){this._labelOutlineColor=d(this,t),this._style.labelOutlineColor=y(this._labelOutlineColor)}},labelOutlineWidth:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._labelOutlineWidth},set:function(t){this._labelOutlineWidth=d(this,t),this._style.labelOutlineWidth=y(this._labelOutlineWidth)}},font:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._font},set:function(t){this._font=d(this,t),this._style.font=y(this._font)}},labelStyle:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._labelStyle},set:function(t){this._labelStyle=d(this,t),this._style.labelStyle=y(this._labelStyle)}},labelText:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._labelText},set:function(t){this._labelText=d(this,t),this._style.labelText=y(this._labelText)}},backgroundColor:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._backgroundColor},set:function(t){this._backgroundColor=d(this,t),this._style.backgroundColor=y(this._backgroundColor)}},backgroundPadding:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._backgroundPadding},set:function(t){this._backgroundPadding=d(this,t),this._style.backgroundPadding=y(this._backgroundPadding)}},backgroundEnabled:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._backgroundEnabled},set:function(t){this._backgroundEnabled=d(this,t),this._style.backgroundEnabled=y(this._backgroundEnabled)}},scaleByDistance:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._scaleByDistance},set:function(t){this._scaleByDistance=d(this,t),this._style.scaleByDistance=y(this._scaleByDistance)}},translucencyByDistance:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._translucencyByDistance},set:function(t){this._translucencyByDistance=d(this,t),this._style.translucencyByDistance=y(this._translucencyByDistance)}},distanceDisplayCondition:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._distanceDisplayCondition},set:function(t){this._distanceDisplayCondition=d(this,t),this._style.distanceDisplayCondition=y(this._distanceDisplayCondition)}},heightOffset:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._heightOffset},set:function(t){this._heightOffset=d(this,t),this._style.heightOffset=y(this._heightOffset)}},anchorLineEnabled:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._anchorLineEnabled},set:function(t){this._anchorLineEnabled=d(this,t),this._style.anchorLineEnabled=y(this._anchorLineEnabled)}},anchorLineColor:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._anchorLineColor},set:function(t){this._anchorLineColor=d(this,t),this._style.anchorLineColor=y(this._anchorLineColor)}},image:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._image},set:function(t){this._image=d(this,t),this._style.image=y(this._image)}},disableDepthTestDistance:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._disableDepthTestDistance},set:function(t){this._disableDepthTestDistance=d(this,t),this._style.disableDepthTestDistance=y(this._disableDepthTestDistance)}},horizontalOrigin:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._horizontalOrigin},set:function(t){this._horizontalOrigin=d(this,t),this._style.horizontalOrigin=y(this._horizontalOrigin)}},verticalOrigin:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._verticalOrigin},set:function(t){this._verticalOrigin=d(this,t),this._style.verticalOrigin=y(this._verticalOrigin)}},labelHorizontalOrigin:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._labelHorizontalOrigin},set:function(t){this._labelHorizontalOrigin=d(this,t),this._style.labelHorizontalOrigin=y(this._labelHorizontalOrigin)}},labelVerticalOrigin:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._labelVerticalOrigin},set:function(t){this._labelVerticalOrigin=d(this,t),this._style.labelVerticalOrigin=y(this._labelVerticalOrigin)}},meta:{get:function(){if(!this._ready)throw new r("The style is not loaded.  Use PGEarth3DTileStyle.readyPromise or wait for PGEarth3DTileStyle.ready to be true.");return this._meta},set:function(t){this._meta=t}}}),h.prototype.getColorShaderFunction=function(t,e,o){return this._colorShaderFunctionReady?(o.translucent=this._colorShaderTranslucent,this._colorShaderFunction):(this._colorShaderFunctionReady=!0,this._colorShaderFunction=i(this.color)?this.color.getShaderFunction(t,e,o,"vec4"):void 0,this._colorShaderTranslucent=o.translucent,this._colorShaderFunction)},h.prototype.getShowShaderFunction=function(t,e,o){return this._showShaderFunctionReady?this._showShaderFunction:(this._showShaderFunctionReady=!0,this._showShaderFunction=i(this.show)?this.show.getShaderFunction(t,e,o,"bool"):void 0,this._showShaderFunction)},h.prototype.getPointSizeShaderFunction=function(t,e,o){return this._pointSizeShaderFunctionReady?this._pointSizeShaderFunction:(this._pointSizeShaderFunctionReady=!0,this._pointSizeShaderFunction=i(this.pointSize)?this.pointSize.getShaderFunction(t,e,o,"float"):void 0,this._pointSizeShaderFunction)},h});