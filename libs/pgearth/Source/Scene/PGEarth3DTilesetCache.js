define(["../Core/defined","../Core/DoublyLinkedList"],function(t,i){"use strict";function e(){this._list=new i,this._sentinel=this._list.add(),this._trimTiles=!1}return e.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},e.prototype.touch=function(i){var e=i.cacheNode;t(e)&&this._list.splice(this._sentinel,e)},e.prototype.add=function(i){t(i.cacheNode)||(i.cacheNode=this._list.add(i))},e.prototype.unloadTile=function(i,e,s){var o=e.cacheNode;t(o)&&(this._list.remove(o),e.cacheNode=void 0,s(i,e))},e.prototype.unloadTiles=function(t,i){var e=this._trimTiles;this._trimTiles=!1;for(var s=this._list,o=1024*t.maximumMemoryUsage*1024,n=this._sentinel,l=s.head;l!==n&&(t.totalMemoryUsageInBytes>o||e);){var r=l.item;l=l.next,this.unloadTile(t,r,i)}},e.prototype.trim=function(){this._trimTiles=!0},e});