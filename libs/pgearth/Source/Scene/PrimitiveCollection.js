define(["../Core/createGuid","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/DeveloperError"],function(t,i,e,r,s,o){"use strict";function n(e){e=i(e,i.EMPTY_OBJECT),this._primitives=[],this._guid=t(),this._zIndex=void 0,this.show=i(e.show,!0),this.destroyPrimitives=i(e.destroyPrimitives,!0)}function p(t,i){if(!t.contains(i))throw new o("primitive is not in this collection.");return t._primitives.indexOf(i)}return r(n.prototype,{length:{get:function(){return this._primitives.length}}}),n.prototype.add=function(t){if(!e(t))throw new o("primitive is required.");var i=t._external=t._external||{};return(i._composites=i._composites||{})[this._guid]={collection:this},this._primitives.push(t),t},n.prototype.remove=function(t){if(this.contains(t)){var i=this._primitives.indexOf(t);if(-1!==i)return this._primitives.splice(i,1),delete t._external._composites[this._guid],this.destroyPrimitives&&t.destroy(),!0}return!1},n.prototype.removeAndDestroy=function(t){var i=this.remove(t);return i&&!this.destroyPrimitives&&t.destroy(),i},n.prototype.removeAll=function(){for(var t=this._primitives,i=t.length,e=0;e<i;++e)delete t[e]._external._composites[this._guid],this.destroyPrimitives&&t[e].destroy();this._primitives=[]},n.prototype.contains=function(t){return!!(e(t)&&t._external&&t._external._composites&&t._external._composites[this._guid])},n.prototype.raise=function(t){if(e(t)){var i=p(this,t),r=this._primitives;if(i!==r.length-1){var s=r[i];r[i]=r[i+1],r[i+1]=s}}},n.prototype.raiseToTop=function(t){if(e(t)){var i=p(this,t),r=this._primitives;i!==r.length-1&&(r.splice(i,1),r.push(t))}},n.prototype.lower=function(t){if(e(t)){var i=p(this,t),r=this._primitives;if(0!==i){var s=r[i];r[i]=r[i-1],r[i-1]=s}}},n.prototype.lowerToBottom=function(t){if(e(t)){var i=p(this,t),r=this._primitives;0!==i&&(r.splice(i,1),r.unshift(t))}},n.prototype.get=function(t){if(!e(t))throw new o("index is required.");return this._primitives[t]},n.prototype.update=function(t){if(this.show)for(var i=this._primitives,e=0;e<i.length;++e)i[e].update(t)},n.prototype.prePassesUpdate=function(t){for(var i=this._primitives,r=0;r<i.length;++r){var s=i[r];e(s.prePassesUpdate)&&s.prePassesUpdate(t)}},n.prototype.updateForPass=function(t,i){for(var r=this._primitives,s=0;s<r.length;++s){var o=r[s];e(o.updateForPass)&&o.updateForPass(t,i)}},n.prototype.postPassesUpdate=function(t){for(var i=this._primitives,r=0;r<i.length;++r){var s=i[r];e(s.postPassesUpdate)&&s.postPassesUpdate(t)}},n.prototype.isDestroyed=function(){return!1},n.prototype.destroy=function(){return this.removeAll(),s(this)},n});