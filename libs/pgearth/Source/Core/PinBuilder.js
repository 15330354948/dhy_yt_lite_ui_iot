define(["./buildModuleUrl","./Color","./defined","./DeveloperError","./Resource","./writeTextToCanvas"],function(e,r,i,o,t,n){"use strict";function s(){this._cache={}}s.prototype.fromColor=function(e,r){if(!i(e))throw new o("color is required");if(!i(r))throw new o("size is required");return u(void 0,void 0,e,r,this._cache)},s.prototype.fromUrl=function(e,r,t){if(!i(e))throw new o("url is required");if(!i(r))throw new o("color is required");if(!i(t))throw new o("size is required");return u(e,void 0,r,t,this._cache)},s.prototype.fromMakiIconId=function(r,t,n){if(!i(r))throw new o("id is required");if(!i(t))throw new o("color is required");if(!i(n))throw new o("size is required");return u(e("Assets/Textures/maki/"+encodeURIComponent(r)+".png"),void 0,t,n,this._cache)},s.prototype.fromText=function(e,r,t){if(!i(e))throw new o("text is required");if(!i(r))throw new o("color is required");if(!i(t))throw new o("size is required");return u(void 0,e,r,t,this._cache)};var a=new r;function l(e,i,o){var t=o/2.5,n=t,s=t;i.width>i.height?s=t*(i.height/i.width):i.width<i.height&&(n=t*(i.width/i.height));var a=Math.round((o-n)/2),l=Math.round(7/24*o-s/2);e.globalCompositeOperation="destination-out",e.drawImage(i,a-1,l,n,s),e.drawImage(i,a,l-1,n,s),e.drawImage(i,a+1,l,n,s),e.drawImage(i,a,l+1,n,s),e.globalCompositeOperation="destination-over",e.fillStyle=r.BLACK.toCssColorString(),e.fillRect(a-1,l-1,n+2,s+2),e.globalCompositeOperation="destination-out",e.drawImage(i,a,l,n,s),e.globalCompositeOperation="destination-over",e.fillStyle=r.WHITE.toCssColorString(),e.fillRect(a-1,l-2,n+2,s+2)}var d=new Array(4);function u(e,r,o,s,u){d[0]=e,d[1]=r,d[2]=o,d[3]=s;var h=JSON.stringify(d),f=u[h];if(i(f))return f;var c=document.createElement("canvas");c.width=s,c.height=s;var w=c.getContext("2d");if(function(e,r,i){e.save(),e.scale(i/24,i/24),e.fillStyle=r.toCssColorString(),e.strokeStyle=r.brighten(.6,a).toCssColorString(),e.lineWidth=.846,e.beginPath(),e.moveTo(6.72,.422),e.lineTo(17.28,.422),e.bezierCurveTo(18.553,.422,19.577,1.758,19.577,3.415),e.lineTo(19.577,10.973),e.bezierCurveTo(19.577,12.63,18.553,13.966,17.282,13.966),e.lineTo(14.386,14.008),e.lineTo(11.826,23.578),e.lineTo(9.614,14.008),e.lineTo(6.719,13.965),e.bezierCurveTo(5.446,13.983,4.422,12.629,4.422,10.972),e.lineTo(4.422,3.416),e.bezierCurveTo(4.423,1.76,5.447,.423,6.718,.423),e.closePath(),e.fill(),e.stroke(),e.restore()}(w,o,s),i(e)){var v=t.createIfNeeded(e).fetchImage().then(function(e){return l(w,e,s),u[h]=c,c});return u[h]=v,v}if(i(r)){var g=n(r,{font:"bold "+s+"px sans-serif"});l(w,g,s)}return u[h]=c,c}return s});