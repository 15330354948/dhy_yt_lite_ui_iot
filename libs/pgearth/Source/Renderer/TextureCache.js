define(["../Core/defined","../Core/defineProperties","../Core/destroyObject"],function(e,t,r){"use strict";function s(){this._textures={},this._numberOfTextures=0,this._texturesToRelease={}}return t(s.prototype,{numberOfTextures:{get:function(){return this._numberOfTextures}}}),s.prototype.getTexture=function(t){var r=this._textures[t];if(e(r))return delete this._texturesToRelease[t],++r.count,r.texture},s.prototype.addTexture=function(e,t){var r={texture:t,count:1};t.finalDestroy=t.destroy;var s=this;t.destroy=function(){0==--r.count&&(s._texturesToRelease[e]=r)},this._textures[e]=r,++this._numberOfTextures},s.prototype.destroyReleasedTextures=function(){var e=this._texturesToRelease;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];delete this._textures[t],r.texture.finalDestroy(),--this._numberOfTextures}this._texturesToRelease={}},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){var e=this._textures;for(var t in e)e.hasOwnProperty(t)&&e[t].texture.finalDestroy();return r(this)},s});