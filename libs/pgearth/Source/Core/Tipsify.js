define(["./defaultValue","./defined","./DeveloperError"],function(e,r,i){"use strict";var n={calculateACMR:function(n){var t=(n=e(n,e.EMPTY_OBJECT)).indices,a=n.maximumIndex,u=e(n.cacheSize,24);if(!r(t))throw new i("indices is required.");var m=t.length;if(m<3||m%3!=0)throw new i("indices length must be a multiple of three.");if(a<=0)throw new i("maximumIndex must be greater than zero.");if(u<3)throw new i("cacheSize must be greater than two.");if(!r(a)){a=0;for(var s=0,f=t[s];s<m;)f>a&&(a=f),f=t[++s]}for(var l=[],o=0;o<a+1;o++)l[o]=0;for(var v=u+1,h=0;h<m;++h)v-l[t[h]]>u&&(l[t[h]]=v,++v);return(v-u+1)/(m/3)}};return n.tipsify=function(n){var t,a=(n=e(n,e.EMPTY_OBJECT)).indices,u=n.maximumIndex,m=e(n.cacheSize,24);function s(e,r,i,n,a,u,m){for(var s,f=-1,l=-1,o=0;o<i.length;){var v=i[o];n[v].numLiveTriangles&&(s=0,a-n[v].timeStamp+2*n[v].numLiveTriangles<=r&&(s=a-n[v].timeStamp),(s>l||-1===l)&&(l=s,f=v)),++o}return-1===f?function(e,r,i,n){for(;r.length>=1;){var a=r[r.length-1];if(r.splice(r.length-1,1),e[a].numLiveTriangles>0)return a}for(;t<n;){if(e[t].numLiveTriangles>0)return++t-1;++t}return-1}(n,u,0,m):f}if(!r(a))throw new i("indices is required.");var f=a.length;if(f<3||f%3!=0)throw new i("indices length must be a multiple of three.");if(u<=0)throw new i("maximumIndex must be greater than zero.");if(m<3)throw new i("cacheSize must be greater than two.");var l=0,o=0,v=a[o],h=f;if(r(u))l=u+1;else{for(;o<h;)v>l&&(l=v),v=a[++o];if(-1===l)return 0;++l}var g,c=[];for(g=0;g<l;g++)c[g]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};o=0;for(var T=0;o<h;)c[a[o]].vertexTriangles.push(T),++c[a[o]].numLiveTriangles,c[a[o+1]].vertexTriangles.push(T),++c[a[o+1]].numLiveTriangles,c[a[o+2]].vertexTriangles.push(T),++c[a[o+2]].numLiveTriangles,++T,o+=3;var w=0,d=m+1;t=1;var p,x,L,S,b=[],z=[],E=0,I=[],C=f/3,M=[];for(g=0;g<C;g++)M[g]=!1;for(;-1!==w;){b=[],S=(x=c[w]).vertexTriangles.length;for(var q=0;q<S;++q)if(!M[T=x.vertexTriangles[q]]){M[T]=!0,o=T+T+T;for(var B=0;B<3;++B)L=a[o],b.push(L),z.push(L),I[E]=L,++E,--(p=c[L]).numLiveTriangles,d-p.timeStamp>m&&(p.timeStamp=d,++d),++o}w=s(0,m,b,c,d,z,l)}return I},n});