define(["./defined","./DeveloperError","./getAbsoluteUri","./Resource","require"],function(e,r,t,n,u){"use strict";var i,o,l,a=/((?:.*\/)|^)pgEarth[\w-]*\.js(?:\W|$)/i;function d(r){return"undefined"==typeof document?r:(e(i)||(i=document.createElement("a")),i.href=r,i.href=i.href,i.href)}function f(){if(e(o))return o;var i;if(i="undefined"!=typeof PGEARTH_BASE_URL?PGEARTH_BASE_URL:e(define.amd)&&!define.amd.toUrlUndefined&&e(u.toUrl)?t("..",U("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),r=0,t=e.length;r<t;++r){var n=e[r].getAttribute("src"),u=a.exec(n);if(null!==u)return u[1]}}(),!e(i))throw new r("Unable to determine PGEarth base URL automatically, try defining a global variable called PGEARTH_BASE_URL.");return(o=new n({url:d(i)})).appendForwardSlash(),o}function c(e){return d(u.toUrl("../"+e))}function s(e){return f().getDerivedResource({url:e}).url}function U(r){return e(l)||(l=e(define.amd)&&!define.amd.toUrlUndefined&&e(u.toUrl)?c:s),l(r)}return U._pgEarthScriptRegex=a,U._buildModuleUrlFromBaseUrl=s,U._clearBaseResource=function(){o=void 0},U.setBaseUrl=function(e){o=n.DEFAULT.getDerivedResource({url:e})},U.getPGEarthBaseUrl=f,U});