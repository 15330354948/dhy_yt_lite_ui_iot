define(["../Core/defined"],function(e){"use strict";function t(){this.head=void 0,this.tail=void 0,this.count=0,this._lastBeforeStartOfFrame=void 0}function r(e,t){var r=t.replacementPrevious,a=t.replacementNext;t===e._lastBeforeStartOfFrame&&(e._lastBeforeStartOfFrame=a),t===e.head?e.head=a:r.replacementNext=a,t===e.tail?e.tail=r:a.replacementPrevious=r,t.replacementPrevious=void 0,t.replacementNext=void 0,--e.count}return t.prototype.markStartOfRenderFrame=function(){this._lastBeforeStartOfFrame=this.head},t.prototype.trimTiles=function(t){for(var a=this.tail,i=!0;i&&e(this._lastBeforeStartOfFrame)&&this.count>t&&e(a);){i=a!==this._lastBeforeStartOfFrame;var o=a.replacementPrevious;a.eligibleForUnloading&&(a.freeResources(),r(this,a)),a=o}},t.prototype.markTileRendered=function(t){var a=this.head;if(a!==t){if(++this.count,!e(a))return t.replacementPrevious=void 0,t.replacementNext=void 0,this.head=t,void(this.tail=t);(e(t.replacementPrevious)||e(t.replacementNext))&&r(this,t),t.replacementPrevious=void 0,t.replacementNext=a,a.replacementPrevious=t,this.head=t}else t===this._lastBeforeStartOfFrame&&(this._lastBeforeStartOfFrame=t.replacementNext)},t});