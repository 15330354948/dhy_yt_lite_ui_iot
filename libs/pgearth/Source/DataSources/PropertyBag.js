define(["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/Event","./ConstantProperty","./createPropertyDescriptor","./Property"],function(e,r,t,i,n,o,s,p){"use strict";var a=function(e,t){this._propertyNames=[],this._definitionChanged=new n,r(e)&&this.merge(e,t)};function h(e){return new o(e)}return t(a.prototype,{propertyNames:{get:function(){return this._propertyNames}},isConstant:{get:function(){for(var e=this._propertyNames,r=0,t=e.length;r<t;r++)if(!p.isConstant(this[e[r]]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),a.prototype.hasProperty=function(e){return-1!==this._propertyNames.indexOf(e)},a.prototype.addProperty=function(t,n,o){var p=this._propertyNames;if(!r(t))throw new i("propertyName is required.");if(-1!==p.indexOf(t))throw new i(t+" is already a registered property.");p.push(t),Object.defineProperty(this,t,s(t,!0,e(o,h))),r(n)&&(this[t]=n),this._definitionChanged.raiseEvent(this)},a.prototype.removeProperty=function(e){var t=this._propertyNames.indexOf(e);if(!r(e))throw new i("propertyName is required.");if(-1===t)throw new i(e+" is not a registered property.");this._propertyNames.splice(t,1),delete this[e],this._definitionChanged.raiseEvent(this)},a.prototype.getValue=function(e,t){if(!r(e))throw new i("time is required.");r(t)||(t={});for(var n=this._propertyNames,o=0,s=n.length;o<s;o++){var a=n[o];t[a]=p.getValueOrUndefined(this[a],e,t[a])}return t},a.prototype.merge=function(e,t){if(!r(e))throw new i("source is required.");for(var n=this._propertyNames,o=r(e._propertyNames)?e._propertyNames:Object.keys(e),s=0,p=o.length;s<p;s++){var a=o[s],h=this[a],f=e[a];void 0===h&&-1===n.indexOf(a)&&this.addProperty(a,void 0,t),void 0!==f&&(void 0!==h?r(h)&&r(h.merge)&&h.merge(f):r(f)&&r(f.merge)&&r(f.clone)?this[a]=f.clone():this[a]=f)}},a.prototype.equals=function(e){return this===e||e instanceof a&&function(e,r){var t=e._propertyNames,i=r._propertyNames,n=t.length;if(n!==i.length)return!1;for(var o=0;o<n;++o){var s=t[o];if(-1===i.indexOf(s))return!1;if(!p.equals(e[s],r[s]))return!1}return!0}(this,e)},a});