define(["../ThirdParty/when","./Check","./defined","./defaultValue","./FeatureDetection","./Resource"],function(e,t,r,n,i,u){"use strict";return function(i){var o=i.uint8Array,a=i.format,c=i.request,f=n(i.flipY,!1);t.typeOf.object("uint8Array",o),t.typeOf.string("format",a);var p,l=new Blob([o],{type:a});return u.supportsImageBitmapOptions().then(function(t){return t?e(u.createImageBitmapFromBlob(l,{flipY:f,premultiplyAlpha:!1})):(p=window.URL.createObjectURL(l),new u({url:p,request:c}).fetchImage({flipY:f}))}).then(function(e){return r(p)&&window.URL.revokeObjectURL(p),e}).otherwise(function(t){return r(p)&&window.URL.revokeObjectURL(p),e.reject(t)})}});