define(["../Core/BoundingRectangle","../Core/Color","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/PixelFormat","../Renderer/Framebuffer","../Renderer/PassState","../Renderer/PixelDatatype","../Renderer/Renderbuffer","../Renderer/RenderbufferFormat","../Renderer/Texture"],function(e,t,r,i,n,s,f,o,d,a,h,u){"use strict";function c(){this._depthStencilTexture=void 0,this._framebuffer=void 0,this._passState=void 0}function p(e){e._framebuffer=e._framebuffer&&e._framebuffer.destroy(),e._depthStencilTexture=e._depthStencilTexture&&e._depthStencilTexture.destroy()}return c.prototype.update=function(t,r,n){var a=n.width,h=n.height;i(this._framebuffer)&&a===this._depthStencilTexture.width&&h===this._depthStencilTexture.height||(p(this),function(t,r){var i=r.drawingBufferWidth,n=r.drawingBufferHeight;t._depthStencilTexture=new u({context:r,width:i,height:n,pixelFormat:s.DEPTH_STENCIL,pixelDatatype:d.UNSIGNED_INT_24_8}),t._framebuffer=new f({context:r,depthStencilTexture:t._depthStencilTexture,destroyAttachments:!1});var a=new o(r);a.blendingEnabled=!1,a.scissorTest={enabled:!0,rectangle:new e},a.viewport=new e,t._passState=a}(this,t));var c=this._framebuffer,l=this._passState;return l.framebuffer=c,l.viewport.width=a,l.viewport.height=h,l.scissorTest.rectangle.x=r.x,l.scissorTest.rectangle.y=h-r.y,l.scissorTest.rectangle.width=1,l.scissorTest.rectangle.height=1,l},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return p(this),n(this)},c});