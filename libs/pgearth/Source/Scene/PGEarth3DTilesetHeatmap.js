define(["../Core/Color","../Core/defaultValue","../Core/defined","../Core/destroyObject","../Core/JulianDate","../Core/Math"],function(e,i,m,r,t,u){"use strict";function n(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function a(e,i){return"_loadTimestamp"===i?t.toDate(e).getTime():e}n.prototype.setReferenceMinimumMaximum=function(e,i,m){this._referenceMinimum[m]=a(e,m),this._referenceMaximum[m]=a(i,m)};var o=[new e(.1,.1,.1,1),new e(.153,.278,.878,1),new e(.827,.231,.49,1),new e(.827,.188,.22,1),new e(1,.592,.259,1),new e(1,.843,0,1)];return n.prototype.colorize=function(i,r){var t=this.tilePropertyName;if(m(t)&&i.contentAvailable&&i._selectedFrame===r.frameNumber){var n=function(e,i){var r=e.tilePropertyName;if(m(r)){var t=a(i[r],r);return m(t)?(e._maximum=Math.max(t,e._maximum),e._minimum=Math.min(t,e._minimum),t):(e.tilePropertyName=void 0,t)}}(this,i),s=this._previousMinimum,_=this._previousMaximum;if(s!==Number.MAX_VALUE&&_!==-Number.MAX_VALUE){var M=_-s+u.EPSILON7,h=u.clamp(n-s,0,M)/M*(o.length-1),l=Math.floor(h),f=Math.ceil(h),c=h-l,p=o[l],A=o[f],v=e.clone(e.WHITE);v.red=u.lerp(p.red,A.red,c),v.green=u.lerp(p.green,A.green,c),v.blue=u.lerp(p.blue,A.blue,c),i._debugColor=v}}},n.prototype.resetMinimumMaximum=function(){var e=this.tilePropertyName;if(m(e)){var i=this._referenceMinimum[e],r=this._referenceMaximum[e],t=m(i)&&m(r);this._previousMinimum=t?i:this._minimum,this._previousMaximum=t?r:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}},n});