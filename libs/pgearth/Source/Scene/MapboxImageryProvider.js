define(["../Core/Credit","../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/DeveloperError","../Core/MapboxApi","../Core/Resource","./UrlTemplateImageryProvider"],function(e,r,t,i,o,n,a,s){"use strict";var m=/\/$/,c=new e('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function u(i){var u=(i=r(i,r.EMPTY_OBJECT)).mapId;if(!t(u))throw new o("options.mapId is required.");var d=i.url;t(d)||(d="https://{s}.tiles.mapbox.com/v4/"),this._url=d;var g=a.createIfNeeded(d),h=n.getAccessToken(i.accessToken);this._mapId=u,this._accessToken=h,this._accessTokenErrorCredit=e.clone(n.getErrorCredit(i.accessToken));var p=r(i.format,"png");/\./.test(p)||(p="."+p),this._format=p;var l,v=g.getUrlComponent();m.test(v)||(v+="/"),v+=u+"/{z}/{x}/{y}"+this._format,g.url=v,g.setQueryParameters({access_token:h}),t(i.credit)?"string"==typeof(l=i.credit)&&(l=new e(l)):l=c,this._resource=g,this._imageryProvider=new s({url:g,credit:l,ellipsoid:i.ellipsoid,minimumLevel:i.minimumLevel,maximumLevel:i.maximumLevel,rectangle:i.rectangle})}return i(u.prototype,{url:{get:function(){return this._url}},ready:{get:function(){return this._imageryProvider.ready}},readyPromise:{get:function(){return this._imageryProvider.readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}}}),u.prototype.getTileCredits=function(e,r,i){if(t(this._accessTokenErrorCredit))return[this._accessTokenErrorCredit]},u.prototype.requestImage=function(e,r,t,i){return this._imageryProvider.requestImage(e,r,t,i)},u.prototype.pickFeatures=function(e,r,t,i,o){return this._imageryProvider.pickFeatures(e,r,t,i,o)},u._defaultCredit=c,u});