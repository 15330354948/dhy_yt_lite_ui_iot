define(["./Cartesian2","./Cartesian3","./Check","./defined","./DeveloperError","./Math"],function(e,n,t,o,r,a){"use strict";var d={octEncodeInRange:function(e,o,d){t.defined("vector",e),t.defined("result",d);var c=n.magnitudeSquared(e);if(Math.abs(c-1)>a.EPSILON6)throw new r("vector must be normalized.");if(d.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),d.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){var i=d.x,f=d.y;d.x=(1-Math.abs(f))*a.signNotZero(i),d.y=(1-Math.abs(i))*a.signNotZero(f)}return d.x=a.toSNorm(d.x,o),d.y=a.toSNorm(d.y,o),d},octEncode:function(e,n){return d.octEncodeInRange(e,255,n)}},c=new e,i=new Uint8Array(1);function f(e){return i[0]=e,i[0]}d.octEncodeToCartesian4=function(e,n){return d.octEncodeInRange(e,65535,c),n.x=f(c.x*(1/256)),n.y=f(c.x),n.z=f(c.y*(1/256)),n.w=f(c.y),n},d.octDecodeInRange=function(e,o,d,c){if(t.defined("result",c),e<0||e>d||o<0||o>d)throw new r("x and y must be unsigned normalized integers between 0 and "+d);if(c.x=a.fromSNorm(e,d),c.y=a.fromSNorm(o,d),c.z=1-(Math.abs(c.x)+Math.abs(c.y)),c.z<0){var i=c.x;c.x=(1-Math.abs(c.y))*a.signNotZero(i),c.y=(1-Math.abs(i))*a.signNotZero(c.y)}return n.normalize(c,c)},d.octDecode=function(e,n,t){return d.octDecodeInRange(e,n,255,t)},d.octDecodeFromCartesian4=function(e,n){t.typeOf.object("encoded",e),t.typeOf.object("result",n);var o=e.x,a=e.y,c=e.z,i=e.w;if(o<0||o>255||a<0||a>255||c<0||c>255||i<0||i>255)throw new r("x, y, z, and w must be unsigned normalized integers between 0 and 255");var f=256*o+a,u=256*c+i;return d.octDecodeInRange(f,u,65535,n)},d.octPackFloat=function(e){return t.defined("encoded",e),256*e.x+e.y};var u=new e;function s(e){return e>>1^-(1&e)}return d.octEncodeFloat=function(e){return d.octEncode(e,u),d.octPackFloat(u)},d.octDecodeFloat=function(e,n){t.defined("value",e);var o=e/256,r=Math.floor(o),a=256*(o-r);return d.octDecode(r,a,n)},d.octPack=function(e,n,o,r){t.defined("v1",e),t.defined("v2",n),t.defined("v3",o),t.defined("result",r);var a=d.octEncodeFloat(e),c=d.octEncodeFloat(n),i=d.octEncode(o,u);return r.x=65536*i.x+a,r.y=65536*i.y+c,r},d.octUnpack=function(e,n,o,r){t.defined("packed",e),t.defined("v1",n),t.defined("v2",o),t.defined("v3",r);var a=e.x/65536,c=Math.floor(a),i=65536*(a-c);a=e.y/65536;var f=Math.floor(a),u=65536*(a-f);d.octDecodeFloat(i,n),d.octDecodeFloat(u,o),d.octDecode(c,f,r)},d.compressTextureCoordinates=function(e){return t.defined("textureCoordinates",e),4096*(4095*e.x|0)+(4095*e.y|0)},d.decompressTextureCoordinates=function(e,n){t.defined("compressed",e),t.defined("result",n);var o=e/4096,r=Math.floor(o);return n.x=r/4095,n.y=(e-4096*r)/4095,n},d.zigZagDeltaDecode=function(e,n,r){t.defined("uBuffer",e),t.defined("vBuffer",n),t.typeOf.number.equals("uBuffer.length","vBuffer.length",e.length,n.length),o(r)&&t.typeOf.number.equals("uBuffer.length","heightBuffer.length",e.length,r.length);for(var a=e.length,d=0,c=0,i=0,f=0;f<a;++f)d+=s(e[f]),c+=s(n[f]),e[f]=d,n[f]=c,o(r)&&(i+=s(r[f]),r[f]=i)},d});