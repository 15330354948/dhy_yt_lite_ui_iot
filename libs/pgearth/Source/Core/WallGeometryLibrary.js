define(["./Cartographic","./defined","./EllipsoidTangentPlane","./Math","./PolygonPipeline","./PolylinePipeline","./WindingOrder"],function(e,t,i,r,n,o,a){"use strict";var h={};function s(e,t){return r.equalsEpsilon(e.latitude,t.latitude,r.EPSILON14)&&r.equalsEpsilon(e.longitude,t.longitude,r.EPSILON14)}var g=new e,l=new e;var u=new Array(2),v=new Array(2),p={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};return h.computePositions=function(h,c,d,f,P,A){var m=function(i,r,n,o){var a=r.length;if(!(a<2)){var h=t(o),u=t(n),v=!0,p=new Array(a),c=new Array(a),d=new Array(a),f=r[0];p[0]=f;var P=i.cartesianToCartographic(f,g);u&&(P.height=n[0]),v=v&&P.height<=0,c[0]=P.height,d[0]=h?o[0]:0;for(var A=1,m=1;m<a;++m){var y=r[m],w=i.cartesianToCartographic(y,l);u&&(w.height=n[m]),v=v&&w.height<=0,s(P,w)?P.height<w.height&&(c[A-1]=w.height):(p[A]=y,c[A]=w.height,d[A]=h?o[m]:0,e.clone(w,P),++A)}if(!(v||A<2))return p.length=A,c.length=A,d.length=A,{positions:p,topHeights:c,bottomHeights:d}}}(h,c,d,f);if(t(m)){if(c=m.positions,d=m.topHeights,f=m.bottomHeights,c.length>=3){var y=i.fromPoints(c,h).projectPointsOntoPlane(c);n.computeWindingOrder2D(y)===a.CLOCKWISE&&(c.reverse(),d.reverse(),f.reverse())}var w,O,C=c.length,E=C-2,b=r.chordLength(P,h.maximumRadius),F=p;if(F.minDistance=b,F.ellipsoid=h,A){var H,L=0;for(H=0;H<C-1;H++)L+=o.numberOfPoints(c[H],c[H+1],b)+1;w=new Float64Array(3*L),O=new Float64Array(3*L);var I=u,S=v;F.positions=I,F.height=S;var T=0;for(H=0;H<C-1;H++){I[0]=c[H],I[1]=c[H+1],S[0]=d[H],S[1]=d[H+1];var W=o.generateArc(F);w.set(W,T),S[0]=f[H],S[1]=f[H+1],O.set(o.generateArc(F),T),T+=W.length}}else F.positions=c,F.height=d,w=new Float64Array(o.generateArc(F)),F.height=f,O=new Float64Array(o.generateArc(F));return{bottomPositions:O,topPositions:w,numCorners:E}}},h});