define(["../Renderer/PixelDatatype","./freezeObject","./WebGLConstants"],function(_,P,R){"use strict";var B={DEPTH_COMPONENT:R.DEPTH_COMPONENT,DEPTH_STENCIL:R.DEPTH_STENCIL,ALPHA:R.ALPHA,RGB:R.RGB,RGBA:R.RGBA,LUMINANCE:R.LUMINANCE,LUMINANCE_ALPHA:R.LUMINANCE_ALPHA,RGB_DXT1:R.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:R.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:R.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:R.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:R.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:R.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:R.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:R.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGB_ETC1:R.COMPRESSED_RGB_ETC1_WEBGL,componentsLength:function(_){switch(_){case B.RGB:return 3;case B.RGBA:return 4;case B.LUMINANCE_ALPHA:return 2;case B.ALPHA:case B.LUMINANCE:default:return 1}},validate:function(_){return _===B.DEPTH_COMPONENT||_===B.DEPTH_STENCIL||_===B.ALPHA||_===B.RGB||_===B.RGBA||_===B.LUMINANCE||_===B.LUMINANCE_ALPHA||_===B.RGB_DXT1||_===B.RGBA_DXT1||_===B.RGBA_DXT3||_===B.RGBA_DXT5||_===B.RGB_PVRTC_4BPPV1||_===B.RGB_PVRTC_2BPPV1||_===B.RGBA_PVRTC_4BPPV1||_===B.RGBA_PVRTC_2BPPV1||_===B.RGB_ETC1},isColorFormat:function(_){return _===B.ALPHA||_===B.RGB||_===B.RGBA||_===B.LUMINANCE||_===B.LUMINANCE_ALPHA},isDepthFormat:function(_){return _===B.DEPTH_COMPONENT||_===B.DEPTH_STENCIL},isCompressedFormat:function(_){return _===B.RGB_DXT1||_===B.RGBA_DXT1||_===B.RGBA_DXT3||_===B.RGBA_DXT5||_===B.RGB_PVRTC_4BPPV1||_===B.RGB_PVRTC_2BPPV1||_===B.RGBA_PVRTC_4BPPV1||_===B.RGBA_PVRTC_2BPPV1||_===B.RGB_ETC1},isDXTFormat:function(_){return _===B.RGB_DXT1||_===B.RGBA_DXT1||_===B.RGBA_DXT3||_===B.RGBA_DXT5},isPVRTCFormat:function(_){return _===B.RGB_PVRTC_4BPPV1||_===B.RGB_PVRTC_2BPPV1||_===B.RGBA_PVRTC_4BPPV1||_===B.RGBA_PVRTC_2BPPV1},isETC1Format:function(_){return _===B.RGB_ETC1},compressedTextureSizeInBytes:function(_,P,R){switch(_){case B.RGB_DXT1:case B.RGBA_DXT1:case B.RGB_ETC1:return Math.floor((P+3)/4)*Math.floor((R+3)/4)*8;case B.RGBA_DXT3:case B.RGBA_DXT5:return Math.floor((P+3)/4)*Math.floor((R+3)/4)*16;case B.RGB_PVRTC_4BPPV1:case B.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(P,8)*Math.max(R,8)*4+7)/8);case B.RGB_PVRTC_2BPPV1:case B.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(P,16)*Math.max(R,8)*2+7)/8);default:return 0}},textureSizeInBytes:function(P,R,r,t){var e=B.componentsLength(P);return _.isPacked(R)&&(e=1),e*_.sizeInBytes(R)*r*t},alignmentInBytes:function(_,P,R){var r=B.textureSizeInBytes(_,P,R,1)%4;return 0===r?4:2===r?2:1},createTypedArray:function(P,R,r,t){var e=_.sizeInBytes(R);return new(e===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:e===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:e===Float32Array.BYTES_PER_ELEMENT&&R===_.FLOAT?Float32Array:Uint32Array)(B.componentsLength(P)*r*t)},flipY:function(_,P,R,r,t){if(1===t)return _;for(var e=B.createTypedArray(P,R,r,t),T=B.componentsLength(P),n=r*T,A=0;A<t;++A)for(var E=A*t*T,G=(t-A-1)*t*T,C=0;C<n;++C)e[G+C]=_[E+C];return e}};return P(B)});