define(["../../../Core/ScreenSpaceEventHandler","../../../Core/defined","../../../Core/defaultValue","../../../Core/ScreenSpaceEventType","../../../Core/DeveloperError","../../../Core/Math","../../../Core/Ellipsoid"],function(e,i,r,t,n,o,a){return function(c){if(!i(c.viewer))throw new n("viewer is required");c.eventType=r(c.eventType,"LEFT_CLICK").toUpperCase();var l=c.viewer.scene,s=l.globe.ellipsoid,p=new e(l.canvas);return p.setInputAction(function(e){var i,r=e.endPosition||e.position,t=l.pickPosition(r);if(t)i=s.cartesianToCartographic(t);else try{var n=c.viewer.scene.camera.getPickRay(r);t=c.viewer.scene.globe.pick(n,c.viewer.scene),i=a.WGS84.cartesianToCartographic(t)}catch(e){}c.callBack&&c.callBack({screenPoint:r,mapPoint:{longitude:i&&i.longitude?o.toDegrees(i.longitude):null,latitude:i&&i.latitude?o.toDegrees(i.latitude):null,height:i?i.height:null},cartographic:i,cartesian:t})},t[c.eventType]),p}});