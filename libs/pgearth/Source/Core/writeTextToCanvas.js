define(["../ThirdParty/measureText","./Color","./defaultValue","./defined","./DeveloperError"],function(e,t,i,o,n){"use strict";var l;return function(r,d){if(!o(r))throw new n("text is required.");if(""!==r){d=i(d,i.EMPTY_OBJECT);var a=i(d.font,"10px sans-serif"),s=i(d.stroke,!1),h=i(d.fill,!0),m=i(d.strokeWidth,1),g=i(d.backgroundColor,t.TRANSPARENT),f=i(d.padding,0),b=2*f,u=document.createElement("canvas");u.width=1,u.height=1,u.style.font=a;var S=u.getContext("2d");o(l)||(o(S.imageSmoothingEnabled)?l="imageSmoothingEnabled":o(S.mozImageSmoothingEnabled)?l="mozImageSmoothingEnabled":o(S.webkitImageSmoothingEnabled)?l="webkitImageSmoothingEnabled":o(S.msImageSmoothingEnabled)&&(l="msImageSmoothingEnabled")),S.font=a,S.lineJoin="round",S.lineWidth=m,S[l]=!1,S.textBaseline=i(d.textBaseline,"bottom"),u.style.visibility="hidden",document.body.appendChild(u);var C=e(S,r,s,h);u.dimensions=C,document.body.removeChild(u),u.style.visibility="";var E=-C.bounds.minx,c=Math.ceil(C.width)+E+b,v=C.height+b,y=v-(v-C.ascent+b)+b;if(u.width=c,u.height=v,S.font=a,S.lineJoin="round",S.lineWidth=m,S[l]=!1,g!==t.TRANSPARENT&&(S.fillStyle=g.toCssColorString(),S.fillRect(0,0,u.width,u.height)),s){var T=i(d.strokeColor,t.BLACK);S.strokeStyle=T.toCssColorString(),S.strokeText(r,E+f,y)}if(h){var x=i(d.fillColor,t.WHITE);S.fillStyle=x.toCssColorString(),S.fillText(r,E+f,y)}return u}}});