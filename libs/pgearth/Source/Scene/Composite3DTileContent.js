define(["../Core/defaultValue","../Core/defined","../Core/defineProperties","../Core/destroyObject","../Core/FeatureDetection","../Core/getMagic","../Core/RuntimeError","../ThirdParty/when"],function(t,e,r,n,o,i,s,u){"use strict";if(!o.supportsTypedArrays())return{};function a(r,n,o,a,f,p){this._tileset=r,this._tile=n,this._resource=o,this._contents=[],this._readyPromise=u.defer(),function(r,n,o,a){o=t(o,0);var f=new Uint8Array(n),p=new DataView(n);o+=c;var h=p.getUint32(o,!0);if(1!==h)throw new s("Only Composite Tile version 1 is supported. Version "+h+" is not.");o+=c,o+=c;var y=p.getUint32(o,!0);o+=c;for(var g=[],l=0;l<y;++l){var _=i(f,o),d=p.getUint32(o+2*c,!0),v=a[_];if(!e(v))throw new s("Unknown tile content type, "+_+", inside Composite tile");var P=v(r._tileset,r._tile,r._resource,n,o);r._contents.push(P),g.push(P.readyPromise),o+=d}u.all(g).then(function(){r._readyPromise.resolve(r)}).otherwise(function(t){r._readyPromise.reject(t)})}(this,a,f,p)}r(a.prototype,{featurePropertiesDirty:{get:function(){for(var t=this._contents,e=t.length,r=0;r<e;++r)if(t[r].featurePropertiesDirty)return!0;return!1},set:function(t){for(var e=this._contents,r=e.length,n=0;n<r;++n)e[n].featurePropertiesDirty=t}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},readyPromise:{get:function(){return this._readyPromise.promise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}}});var c=Uint32Array.BYTES_PER_ELEMENT;return a.prototype.hasProperty=function(t,e){return!1},a.prototype.getFeature=function(t){},a.prototype.applyDebugSettings=function(t,e){for(var r=this._contents,n=r.length,o=0;o<n;++o)r[o].applyDebugSettings(t,e)},a.prototype.applyStyle=function(t){for(var e=this._contents,r=e.length,n=0;n<r;++n)e[n].applyStyle(t)},a.prototype.update=function(t,e){for(var r=this._contents,n=r.length,o=0;o<n;++o)r[o].update(t,e)},a.prototype.isDestroyed=function(){return!1},a.prototype.destroy=function(){for(var t=this._contents,e=t.length,r=0;r<e;++r)t[r].destroy();return n(this)},a});