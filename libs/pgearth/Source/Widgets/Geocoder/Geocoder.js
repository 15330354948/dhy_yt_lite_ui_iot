define(["../../Core/defined","../../Core/defineProperties","../../Core/destroyObject","../../Core/DeveloperError","../../Core/FeatureDetection","../../ThirdParty/knockout","../getElement","./GeocoderViewModel"],function(e,t,n,o,i,s,r,a){"use strict";var d="M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z",c="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z";function u(t){if(!e(t)||!e(t.container))throw new o("options.container is required.");if(!e(t.scene))throw new o("options.scene is required.");var n=r(t.container),u=new a(t);u._startSearchPath=d,u._stopSearchPath=c;var h=document.createElement("form");h.setAttribute("data-bind","submit: search");var p=document.createElement("input");p.type="search",p.className="pgEarth-geocoder-input",p.setAttribute("placeholder","Enter an address or landmark..."),p.setAttribute("data-bind",'textInput: searchText,disable: isSearchInProgress,event: { keyup: handleKeyUp, keydown: handleKeyDown, mouseover: deselectSuggestion },css: { "pgEarth-geocoder-input-wide" : keepExpanded || searchText.length > 0 },hasFocus: _focusTextbox'),this._onTextBoxFocus=function(){setTimeout(function(){p.select()},0)},p.addEventListener("focus",this._onTextBoxFocus,!1),h.appendChild(p),this._textBox=p;var m=document.createElement("span");m.className="pgEarth-geocoder-searchButton",m.setAttribute("data-bind","click: search,pgEarthSvgPath: { path: isSearchInProgress ? _stopSearchPath : _startSearchPath, width: 32, height: 32 }"),h.appendChild(m),n.appendChild(h);var g=document.createElement("div");g.className="search-results",g.setAttribute("data-bind","visible: _suggestionsVisible");var l=document.createElement("ul");l.setAttribute("data-bind","foreach: _suggestions");var v=document.createElement("li");l.appendChild(v),v.setAttribute("data-bind","text: $data.displayName, click: $parent.activateSuggestion, event: { mouseover: $parent.handleMouseover}, css: { active: $data === $parent._selectedSuggestion }"),g.appendChild(l),n.appendChild(g),s.applyBindings(u,h),s.applyBindings(u,g),this._container=n,this._searchSuggestionsContainer=g,this._viewModel=u,this._form=h,this._onInputBegin=function(e){n.contains(e.target)||(u._focusTextbox=!1,u.hideSuggestions())},this._onInputEnd=function(e){n.contains(e.target)&&(u._focusTextbox=!0,u.showSuggestions())},i.supportsPointerEvents()?(document.addEventListener("pointerdown",this._onInputBegin,!0),document.addEventListener("pointerup",this._onInputEnd,!0),document.addEventListener("pointercancel",this._onInputEnd,!0)):(document.addEventListener("mousedown",this._onInputBegin,!0),document.addEventListener("mouseup",this._onInputEnd,!0),document.addEventListener("touchstart",this._onInputBegin,!0),document.addEventListener("touchend",this._onInputEnd,!0),document.addEventListener("touchcancel",this._onInputEnd,!0))}return t(u.prototype,{container:{get:function(){return this._container}},searchSuggestionsContainer:{get:function(){return this._searchSuggestionsContainer}},viewModel:{get:function(){return this._viewModel}}}),u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return i.supportsPointerEvents()?(document.removeEventListener("pointerdown",this._onInputBegin,!0),document.removeEventListener("pointerup",this._onInputEnd,!0)):(document.removeEventListener("mousedown",this._onInputBegin,!0),document.removeEventListener("mouseup",this._onInputEnd,!0),document.removeEventListener("touchstart",this._onInputBegin,!0),document.removeEventListener("touchend",this._onInputEnd,!0)),this._viewModel.destroy(),s.cleanNode(this._form),s.cleanNode(this._searchSuggestionsContainer),this._container.removeChild(this._form),this._container.removeChild(this._searchSuggestionsContainer),this._textBox.removeEventListener("focus",this._onTextBoxFocus,!1),n(this)},u});