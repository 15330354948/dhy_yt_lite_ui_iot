define(["./markdown-it-sanitizer","./markdown-it"],function(n,e){"use strict";var r=/<html(.|\s)*>(.|\s)*<\/html>/im,i=new e({html:!0,linkify:!0});function t(n){if(n instanceof HTMLAnchorElement&&(n.target="_blank"),n.childNodes&&n.childNodes.length>0)for(var e=0;e<n.childNodes.length;++e)t(n.childNodes[e])}return i.use(n,{imageClass:"",removeUnbalanced:!1,removeUnknown:!1}),{register:function(n){n.bindingHandlers.markdown={init:function(){return{controlsDescendantBindings:!0}},update:function(e,a){for(;e.firstChild;)n.removeNode(e.firstChild);var s,d=n.unwrap(a());s=r.test(d)?d:i.render(d);var o=n.utils.parseHtmlFragment(s,e);e.className=e.className+" markdown";for(var l=0;l<o.length;++l){var c=o[l];t(c),e.appendChild(c)}}}}}});