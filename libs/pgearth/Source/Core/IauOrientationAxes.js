define(["./Cartesian3","./defined","./Iau2000Orientation","./JulianDate","./Math","./Matrix3","./Quaternion"],function(n,t,o,e,i,a,r){"use strict";function u(n){t(n)&&"function"==typeof n||(n=o.ComputeMoon),this._computeFunction=n}var c=new n,s=new n,f=new n;var h=new a,M=new r;return u.prototype.evaluate=function(o,u){t(o)||(o=e.now());var w=this._computeFunction(o),y=function(o,e,r){var u=c;u.x=Math.cos(o+i.PI_OVER_TWO),u.y=Math.sin(o+i.PI_OVER_TWO),u.z=0;var h=Math.cos(e),M=f;M.x=h*Math.cos(o),M.y=h*Math.sin(o),M.z=Math.sin(e);var w=n.cross(M,u,s);return t(r)||(r=new a),r[0]=u.x,r[1]=w.x,r[2]=M.x,r[3]=u.y,r[4]=w.y,r[5]=M.y,r[6]=u.z,r[7]=w.z,r[8]=M.z,r}(w.rightAscension,w.declination,u),p=i.zeroToTwoPi(w.rotation),v=r.fromAxisAngle(n.UNIT_Z,p,M),x=a.fromQuaternion(r.conjugate(v,v),h);return a.multiply(x,y,y)},u});